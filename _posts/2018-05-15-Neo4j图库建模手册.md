---
title: Neo4j图库建模手册
tags: 图库
---


模型分析
==

典型人员轨迹分析：旅馆同住、同火车、同航班...

![](https://v4liulv.github.io/assets/image/1514965748312_10.png)

定义：
圆圈代表顶点信息

-   红色代表：User人员信息

-   蓝色代表：Hotel旅馆住宿信息

-   绿色代表：Train火车信息

-   紫色代表：Flight航班信息

单向线条代表边

人
==

人员信息-节点
-------------

![](https://v4liulv.github.io/assets/image/1514965842285_46.png)

**标签**：User

**属性包含：**

-   证件号码 'zjhm:522... '

-   证件类型 'zjlx:身份证'

-   姓名 'xm:张三'

-   创建时间 'createTime:2017..'

-   更新时间 'updateTime:2017...'

    注意：其他详细信息通过zjhm和zjlx去常口或者其他业务表进行查询。

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
|  User |  id | Neo4j自定义的ID  | Long |  Y | Y  |
| User  |  zjhm |  证件号码  | String  |  Y | Y  |
|  User | zjlx |  证件类型 |  String |  N |  N |
| User  |  xm  |  姓名 | String  |  N | Y |
| User  | createTime | 创建时间 | Date | N | N |
| User  | updateTime | 更新时间 | Date | N | N |


**对应关系**

-   旅馆住宿

-   乘坐火车

-   乘坐航班

旅馆
====

旅馆信息-节点
--------------------------------

**标签信息**：Hotel

**图模型构建**

![](https://v4liulv.github.io/assets/image/1514965954365_67.png)

注意：其详细信息通过lgid去旅馆注册信息表查询节点：Hotel的结构

**属性包含：**

-   旅馆顶点主键 'hotelId:lg2007|007'

-   旅馆ID 'lgid:lg2007'

-   旅馆名称 'lgmc:贵阳东山大酒店'

-   房间号 'fjh:房间号'

-   创建时间 'createTime:2017..'

-   更新时间 'updateTime:2017...'

    **对应关系：**旅馆住宿

**图模型数据结构**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| Hotel  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| Hotel  | hotelId |  旅馆自定义主键  | String  |  Y | Y  |
| Hotel  | lgid |  旅馆ID |  String |  N |  Y |
| Hotel  | lgmc  |  旅馆名称 | String  |  N | Y |
| Hotel  | fjh  |  房间号 | String  |  N | N |
| Hotel  | createTime | 创建时间 | Date | N | N |
| Hotel  | updateTime | 更新时间 | Date | N | N |


旅馆住宿-关系（人与旅馆）
-----------------------------------------------

**关系标签：旅馆住宿**

**图模型构建（**人--->旅馆信息关系**）:**

![](https://v4liulv.github.io/assets/image/1514966061786_37.png)

红色---代表User人员信息顶点蓝色---代表Hotel旅馆信息顶点

**关系属性：**

-   原系统主键 yxt_id: PZKA232..

-   入住时间 rzsj: 20171214091011

-   退房时间 tfsj: 20171215091011

-   更新时间 yxt_gxsj: 20171215091011

**旅馆住宿关系的结构:**

**图模型数据结构**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 旅馆住宿  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| 旅馆住宿  | yxt_id |  原系统主键  | String  |  Y | Y  |
| 旅馆住宿  | rzsj |  入住时间 |  Date |  N |  N |
| 旅馆住宿  | tfsj  |  退房时间 | Date  |  N | N |
| 旅馆住宿  | yxt_gxsj  |  原系统关系时间 | String  |  N | N |


火车
====

火车信息-节点
----------------------------

**标签**：Train

**模型构建:**

![](https://v4liulv.github.io/assets/image/1514966165883_54.png)

**属性包含：**

-   火车顶点主键: 'trainId:cc2017|贵阳|广州'

-   车次: 'cc:cc2017'

-   始发站: 'sfz:贵阳'

-   终点站: 'zdz:终点站'

-   创建时间: 'createTime:2017..'

-   更新时间: 'updateTime:2017...'

    注意：其详细信息通过车次去原系统表查询

**Train的结构：**


| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| Train  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| Train  | trianId |  火车自定义主键  | String  |  Y | Y  |
| Train  | cc |  车次 |  String |  N |  Y |
| Train  | sfz  |  始发站 | String  |  N | N |
| Train  | zdz  |  终点站 | String  |  N | N |
| Train  | createTime  |  创建时间 | Date  |  N | N |
| Train  | updateTime  |  更新时间 | Date  |  N | N |

乘坐火车-关系（人与火车）
-------------------------------------------

**标签：**乘坐火车

**模型构建（人--->火车关系）：**

![](https://v4liulv.github.io/assets/image/1514966292188_54.png)

**属性包含：**

-   原系统主键 yxt_id:PZKA232..

-   发车日期 fcrq: 2017-12-14

-   发车时间 fcsj: 2017-12-14 09:10

-   到达时间 ddsj: 2017-12-14 20:50

-   原系统更新时间 yxt_gxsj:2017-12-14 20:50

    **乘坐火车关系结构**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 乘坐火车  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| 乘坐火车  | yxt_id |  原系统主键  | String  |  Y | Y  |
| 乘坐火车  | fcrq |  发车日期 |  String |  N |  N |
| 乘坐火车  | fcsj  |  发车时间 | String  |  N | N |
| 乘坐火车  | ddsj  |  到达时间 | String  |  N | N |
| 乘坐火车  | yxt_gxsj  |  原系统更新时间 | Date  |  N | N |


民航
====

航班信息-节点
-----------------------------

**标签**：Flight

**模型构建**

![](https://v4liulv.github.io/assets/image/1514966372449_32.png)

**属性包含：**

-   航班信息顶点主键 'flightId:hbh2017|贵阳|广州'

-   航班号 'hbh:hbh2017'

-   起飞站 'qfz:贵阳'

-   终点站 'zdz:广州'

-   创建时间 'createTime:2017..'

-   更新时间 'updateTime:2017...'

    注意：其详细信息通过航班号hbh去原系统表查询

**Flight的结构：**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| Flight  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| Flight  | flightId |  航班自定义主键  | String  |  Y | Y  |
| Flight  | hbh |  航班号 |  String |  N |  Y |
| Flight  | qfz  |  始发站 | String  |  N | N |
| Flight  | zdz  |  终点站 | String  |  N | N |
| Flight  | createTime  |  创建时间 | Date  |  N | N |
| Flight  | updateTime  |  更新时间 | Date  |  N | N |


乘坐航班-关系（人与航班）
-------------------------------------------

**标签**：乘坐航班

**模型构建（人--->航班信息关系）：**

![](https://v4liulv.github.io/assets/image/1514966466033_38.png)

**属性包含：**

-   原系统主键 yxt_id: zbda...

-   原系统更新时间 yxt_gxsj: 2017-12-14 20:50

-   航班日期 hbrq: 2017-12-14

-   起飞时间 qfsj: 2017-12-14 09:10

-   到达时间 ddsj: 2017-12-14 20:50

    **乘坐航班结构：**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 乘坐航班  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| 乘坐航班  | yxt_id |  原系统主键  | String  |  Y | Y  |
| 乘坐航班  | yxt_gxsj |  原系统更新时间 |  String |  N |  N |
| 乘坐航班  | qfsj  |  起飞时间 | String  |  N | N |
| 乘坐航班  | ddsj  |  终点站 | String  |  N | N |


网吧
====

网吧信息-节点
------------------------------

**标签**：Netbars

**模型构建:**

![](https://v4liulv.github.io/assets/image/1514966522867_12.png)

**属性:**

-   网吧信息顶点主键 'netbarsId:wbh2017'

-   网吧ID 'wbid:wbh2017'

-   网吧名称 wbmc:贵阳风铃网吧'

-   网吧详细地址 'wbxxdz:贵州省贵阳市云岩区宝山北路111号'

-   创建时间 'createTime:2017..'

-   更新时间 'updateTime:2017...'

**数据结构：**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| Netbars  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| Netbars  | metbarsId |  网吧自定义主键  | String  |  Y | Y  |
| Netbars  | wbid |  网吧ID |  String |  Y |  Y |
| Netbars  | wbmc  |  网吧名称 | String  |  N | Y |
| Netbars  | wbxxdz  |  网吧详细地址 | String  |  N | N |
| Netbars  | createTime  |  创建时间 | Date  |  N | N |
| Netbars  | updateTime  |  更新时间 | Date  |  N | N |


上网-关系
-----------------------

**标签**：上网

![](https://v4liulv.github.io/assets/image/1514966619102_13.png)

**模型构建（人--->网吧信息关系）：**

**属性包含：**

-   原系统主键 yxt_id: zbda...

-   原系统更新时间 yxt_gxsj: 2017-12-14 20:50

-   上网时间 swsj: 2017-12-14 08:00

-   下网时间 xwsj: 2017-12-14 14:14

**上网信息结构：**

| **标签**  |  **属性键** | **说明** | **类型** | **是否唯一** | **是否索引**  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 网吧上网  | id | Neo4j自定义的ID  | Long |  Y | Y  |
| 网吧上网  | yxt_id |  原系统主键  | String  |  Y | Y  |
| 网吧上网  | yxt_gxsj |  原系统更新时间 |  Date |  N |  Y |
| 网吧上网  | swsj  |  上网时间 | String  |  N | N |
| 网吧上网  | ddsj  |  下网时间 | String  |  N | N |
