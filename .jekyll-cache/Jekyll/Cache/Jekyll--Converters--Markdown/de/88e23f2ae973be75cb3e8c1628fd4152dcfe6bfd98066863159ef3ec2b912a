I"Ú<h1 id="1-å®‰è£…clickhouse">1. å®‰è£…ClickHouse</h1>

<h2 id="11-dockeræ–¹å¼å®‰è£…">1.1. Dockeræ–¹å¼å®‰è£…</h2>

<p>è¦åœ¨Dockerä¸­è¿è¡ŒClickHouseï¼Œè¯·éµå¾ªDockerçš„æŒ‡å—ã€‚é‚£äº›é•œåƒä½¿ç”¨å®˜æ–¹çš„debåŒ…ã€‚</p>

<h3 id="111-ä½¿ç”¨æºç å®‰è£…">1.1.1. ä½¿ç”¨æºç å®‰è£…</h3>

<p>Client: programs/clickhouse-client
Server: programs/clickhouse-server</p>

<p>å‘½ä»¤æ¥æŸ¥çœ‹å®‰è£…å¯ç”¨ç‰ˆæœ¬ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>docker search clickhouse-server
docker search clickhouse-client
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æŸ¥è¯¢å¾—åˆ°å¯ç”¨çš„é•œåƒæœ‰yandex/å¼€å¤´çš„ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸‹é¢å‘½ä»¤ä¸‹è½½é•œåƒåˆ°æœ¬åœ°</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nf">docker</span><span class="w"> </span><span class="nx">pull</span><span class="w"> </span><span class="nx">yandex/clickhouse-server:latest</span><span class="w">
</span><span class="nf">docker</span><span class="w"> </span><span class="nx">pull</span><span class="w"> </span><span class="nx">yandex/clickhouse-client:latest</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¸‹è½½å®‰è£…å®Œæˆåï¼ŒæŸ¥çœ‹å·²ç»å®‰è£…çš„é•œåƒ</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">docker</span><span class="w"> </span><span class="nx">images</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>åœ¨æœåŠ¡å™¨ä¸­ä¸ºæ•°æ®åˆ›å»ºå¦‚ä¸‹ç›®å½•ï¼š</p>

<p>/opt/clickhouse/data/default/
/opt/clickhouse/metadata/default/</p>

<p>(å®ƒä»¬å¯ä»¥åœ¨server configä¸­é…ç½®ã€‚)
ä¸ºéœ€è¦çš„ç”¨æˆ·è¿è¡Œâ€™chownâ€™</p>

<p>æ—¥å¿—çš„è·¯å¾„å¯ä»¥åœ¨server config (src/programs/server/config.xml)ä¸­é…ç½®ã€‚</p>

<h1 id="2-å¯åŠ¨clickhouse">2. å¯åŠ¨ClickHouse</h1>

<p>å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤åœ¨åå°å¯åŠ¨æœåŠ¡ï¼š</p>

<p>sudo service clickhouse-server start
å¯ä»¥åœ¨/var/log/clickhouse-server/ç›®å½•ä¸­æŸ¥çœ‹æ—¥å¿—ã€‚</p>

<p>å¦‚æœæœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œè¯·æ£€æŸ¥é…ç½®æ–‡ä»¶ /etc/clickhouse-server/config.xmlã€‚</p>

<p>ä½ ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å°ä¸­ç›´æ¥å¯åŠ¨æœåŠ¡ï¼š</p>

<p>clickhouse-server â€“config-file=/etc/clickhouse-server/config.xml
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ—¥å¿—å°†è¢«æ‰“å°åˆ°æ§åˆ¶å°ä¸­ï¼Œè¿™åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¾ˆæ–¹ä¾¿ã€‚
å¦‚æœé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸­ï¼Œä½ å¯ä»¥ä¸æŒ‡å®šâ€™â€“config-fileâ€™å‚æ•°ã€‚å®ƒé»˜è®¤ä½¿ç”¨â€™./config.xmlâ€™ã€‚</p>

<p>ä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ï¼š</p>

<p>clickhouse-client
é»˜è®¤æƒ…å†µä¸‹å®ƒä½¿ç”¨â€™defaultâ€™ç”¨æˆ·æ— å¯†ç çš„ä¸localhost:9000æœåŠ¡å»ºç«‹è¿æ¥ã€‚
å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨äºè¿æ¥è¿œç¨‹æœåŠ¡ï¼Œä¾‹å¦‚ï¼š</p>

<p>clickhouse-client â€“host=example.com
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒÂ«Command-line clientÂ»éƒ¨åˆ†ã€‚</p>

<h1 id="3-æ£€æŸ¥clickhouseæ˜¯å¦å·¥ä½œ">3. æ£€æŸ¥ClickHouseæ˜¯å¦å·¥ä½œ</h1>

<p>milovidov@hostname:~/work/metrica/src/src/Client$ ./clickhouse-client
ClickHouse client version 0.0.18749.
Connecting to localhost:9000.
Connected to ClickHouse server version 0.0.18749.</p>

<p>:) SELECT 1</p>

<p>SELECT 1</p>

<p>â”Œâ”€1â”€â”
â”‚ 1 â”‚
â””â”€â”€â”€â”˜</p>

<p>1 rows in set. Elapsed: 0.003 sec.</p>

<p>:)
æ­å–œï¼Œç³»ç»Ÿå·²ç»å·¥ä½œäº†!</p>

<p>ä¸ºäº†ç»§ç»­è¿›è¡Œå®éªŒï¼Œä½ å¯ä»¥å°è¯•ä¸‹è½½æµ‹è¯•æ•°æ®é›†ã€‚</p>
:ET