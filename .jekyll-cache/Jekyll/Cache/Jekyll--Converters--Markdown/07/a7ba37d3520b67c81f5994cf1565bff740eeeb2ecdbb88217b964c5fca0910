I"å<h2 id="linuxç®¡ç†æ‰‹å†Œ">Linuxç®¡ç†æ‰‹å†Œ</h2>

<h1 id="1-æŸ¥çœ‹linuxæœåŠ¡å™¨é…ç½®ä¿¡æ¯å‘½ä»¤">1. æŸ¥çœ‹linuxæœåŠ¡å™¨é…ç½®ä¿¡æ¯å‘½ä»¤</h1>

<h2 id="11-æŸ¥çœ‹æ“ä½œç³»ç»Ÿä¿¡æ¯">1.1. æŸ¥çœ‹æ“ä½œç³»ç»Ÿä¿¡æ¯ï¼š</h2>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nf">uname</span><span class="w"> </span><span class="nt">-a</span><span class="w">

</span><span class="nf">cat</span><span class="w"> </span><span class="nx">/etc/redhat-release</span><span class="w"> 
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>CentOS Linux release 7.5.1804 (Core)</p>

<h2 id="12-æŸ¥çœ‹æ˜¯å¦æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯ç‰©ç†æœº">1.2. æŸ¥çœ‹æ˜¯å¦æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯ç‰©ç†æœºï¼š</h2>

<p>https://blog.csdn.net/yangniuer/article/details/105320619</p>

<table>
  <tbody>
    <tr>
      <td>dmesg</td>
      <td>grep -i virtual</td>
    </tr>
  </tbody>
</table>

<h2 id="13-æŸ¥çœ‹-cpuä¿¡æ¯">1.3. æŸ¥çœ‹ cpuä¿¡æ¯ï¼š</h2>

<p>cat /proc/cpuinfo</p>

<h2 id="14-æŸ¥çœ‹å†…å­˜ä¿¡æ¯">1.4. æŸ¥çœ‹å†…å­˜ä¿¡æ¯ï¼š</h2>

<p>free</p>

<p>free -g</p>

<p>grep MemTotal /proc/meminfo</p>

<h2 id="15-æŸ¥çœ‹centosç‰ˆæœ¬ä¿¡æ¯">1.5. æŸ¥çœ‹centosç‰ˆæœ¬ä¿¡æ¯ï¼š</h2>

<p>cat /etc/issue</p>

<h2 id="16-æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ">1.6. æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š</h2>

<p>df -h</p>

<p>æŸ¥çœ‹å…¶å®ƒç£ç›˜å¤–è®¾ä¿¡æ¯ï¼š
fdisk -l</p>

<p>smartctl â€“all /dev/sda
å¦‚æœæ²¡æœ‰smartctl å·¥å…·å¯ä»¥ç”¨ yum install smartmontoolså®‰è£…</p>

<p>æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å—è®¾å¤‡çš„ä¿¡æ¯ï¼š
lsblk</p>

<h2 id="17-linuxæŸ¥çœ‹ç£ç›˜ç±»å‹æ˜¯å¦ssdç›˜">1.7. linuxæŸ¥çœ‹ç£ç›˜ç±»å‹ï¼ˆæ˜¯å¦SSDç›˜ï¼‰</h2>
<p>ä»‹ç»ä¸¤ç§æ–¹æ³•ï¼š</p>

<p>ç¬¬ä¸€ç§ï¼š</p>

<p>cat /sys/block/sda/queue/rotational</p>

<p>æ³¨æ„ï¼š
å‘½ä»¤ä¸­çš„sbaæ˜¯ä½ çš„ç£ç›˜åç§°ï¼Œå¯ä»¥é€šè¿‡dfå‘½ä»¤æŸ¥çœ‹ç£ç›˜ï¼Œç„¶åä¿®æ”¹æˆä½ è¦çš„
ç»“æœï¼š
è¿”å›0ï¼šSSDç›˜
è¿”å›1ï¼šSATAç›˜</p>

<h2 id="18-ä½¿ç”¨ç£ç›˜æ˜¯å¦ä¸ºraid">1.8. ä½¿ç”¨ç£ç›˜æ˜¯å¦ä¸ºraid</h2>

<p>https://www.cnblogs.com/JianGuoWan/p/7709971.html</p>

<p>cat /proc/mdstat</p>

<p>å¦‚æœ
Personalities : 
unused devices: <none></none></p>

<p>åˆ™æ²¡åšraidï¼Œæˆ–è€…æ˜¯å…³é—­çš„</p>

<h2 id="19-æŸ¥çœ‹æ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯">1.9. æŸ¥çœ‹æ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯</h2>
<p>dmidecode |more
æˆ–ï¼šdmesg |more</p>

<h2 id="110-æŸ¥çœ‹ç½‘å¡ä¿¡æ¯">1.10. æŸ¥çœ‹ç½‘å¡ä¿¡æ¯</h2>

<p>ethtool eth0</p>

<h1 id="2-åˆ›å»ºæ–‡ä»¶å‘½ä»¤">2. åˆ›å»ºæ–‡ä»¶å‘½ä»¤</h1>

<p>ç›´æ¥vim ç¼–è¾‘ä¿å­˜</p>

<h1 id="3-tcpç«¯å£">3. TCPç«¯å£</h1>

<h2 id="31-æŸ¥çœ‹ç«¯å£">3.1. æŸ¥çœ‹ç«¯å£</h2>

<p>netstat -lnpt</p>

<table>
  <tbody>
    <tr>
      <td>netstat -anp</td>
      <td>grep 6500</td>
    </tr>
  </tbody>
</table>

<p>æŸ¥çœ‹ç«¯å£å·è¢«é‚£ä¸ªè¿›ç¨‹idå ç”¨ï¼Œç„¶å
kill -9</p>

<p>æŸ¥çœ‹é‚£äº›ç¨‹åºä½¿ç”¨tcpçš„80ç«¯å£ï¼š</p>

<p>fuser -n tcp 80</p>

<h2 id="32-é˜²ç«å¢™ä¸‹æ‰“å¼€ç«¯å£">3.2. é˜²ç«å¢™ä¸‹æ‰“å¼€ç«¯å£</h2>

<h3 id="321-æ‰“å¼€ç«¯å£å·">3.2.1. æ‰“å¼€ç«¯å£å·</h3>

<p>TBDS Portalå¿…é¡»å¼€æ”¾ç«¯å£ï¼š80 443 8081 8080 8088</p>

<p>iptables -A INPUT -ptcp â€“dport  443 -j ACCEPT
iptables -A INPUT -ptcp â€“dport  8081 -j ACCEPT
iptables -A INPUT -ptcp â€“dport  8080 -j ACCEPT
iptables -A INPUT -ptcp â€“dport  8088 -j ACCEPT</p>

<h3 id="322-æŸ¥è¯¢ç«¯å£æ˜¯å¦å·²æ‰“å¼€">3.2.2. æŸ¥è¯¢ç«¯å£æ˜¯å¦å·²æ‰“å¼€</h3>

<p>firewall-cmd â€“query-port=7788/tcp</p>

<h3 id="323-å…³é—­ç«¯å£å·">3.2.3. å…³é—­ç«¯å£å·</h3>

<p>iptables -A OUTPUT -p tcp â€“dport ç«¯å£å·-j DROP</p>

<h3 id="324-ä¿å­˜è®¾ç½®">3.2.4. ä¿å­˜è®¾ç½®</h3>

<p>service iptables save 
systemctl iptables save</p>

<h1 id="4-æ·»åŠ ç”¨æˆ·">4. æ·»åŠ ç”¨æˆ·</h1>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nf">useradd</span><span class="w"> </span><span class="nx">tbds_student_liulv</span><span class="w">
</span><span class="nf">passwd</span><span class="w"> </span><span class="nx">tbds_student_liulv</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="5-æ—¥å¿—æŸ¥çœ‹">5. æ—¥å¿—æŸ¥çœ‹</h1>

<p><strong>è·Ÿè¸ªæœ€æ–°æ—¥å¿—</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">tailf</span><span class="w"> </span><span class="nx">/log/t.log</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>è·Ÿè¸ªæœ€æ–°æ—¥å¿—10è¡Œ</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">tail</span><span class="w"> </span><span class="nt">-n</span><span class="w"> </span><span class="nx">10</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æ ¹æ®å…³é”®å­—æŸ¥çœ‹æ—¥å¿—</strong></p>

<ul>
  <li><strong>æ ¹æ®å…³é”®å­—æŸ¥çœ‹æ—¥å¿—</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>cat t.log</td>
      <td>grep â€œExceptionâ€</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><strong>æ ¹æ®å…³é”®å­—æŸ¥çœ‹å10è¡Œæ—¥å¿—</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>cat t.log</td>
      <td>grep â€œErrorâ€ -A 10</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><strong>æ ¹æ®å…³é”®å­—æŸ¥çœ‹å‰10è¡Œæ—¥å¿—</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>cat t.log</td>
      <td>grep â€œErrorâ€ -B 10</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><strong>æ ¹æ®å…³é”®å­—æŸ¥çœ‹å‰å10è¡Œæ—¥å¿—ï¼Œå¹¶æ˜¾ç¤ºå‡ºè¡Œå·</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>cat -n t.log</td>
      <td>grep â€œWarnâ€ -C 10</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><strong>æŸ¥çœ‹æ—¥å¿—å‰ 50 è¡Œ</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>cat t.log</td>
      <td>head -n 50</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><strong>æŸ¥çœ‹æ—¥å¿—å 50 è¡Œï¼Œå¹¶æ˜¾ç¤ºå‡ºè¡Œå·</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>cat -n t.log</td>
      <td>tail -n 50</td>
    </tr>
  </tbody>
</table>

<h1 id="6-linux-æ·»åŠ ç¯å¢ƒå˜é‡æ¨¡ç‰ˆ">6. Linux æ·»åŠ ç¯å¢ƒå˜é‡æ¨¡ç‰ˆ</h1>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nf">echo</span><span class="w"> </span><span class="s2">"export SCALA_HOME=/usr/local/scala/scala-2.11.11"</span><span class="w"> </span><span class="err">&gt;&gt;</span><span class="w"> </span><span class="nx">/etc/profile</span><span class="w">
</span><span class="nf">echo</span><span class="w"> </span><span class="s2">"export PATH=</span><span class="nv">$SCALA_HOME</span><span class="s2">/bin:</span><span class="nv">$PATH</span><span class="s2">"</span><span class="w"> </span><span class="err">&gt;&gt;</span><span class="w"> </span><span class="nx">/etc/profile</span><span class="w">
</span><span class="nf">cat</span><span class="w"> </span><span class="nx">/etc/profile</span><span class="w">
</span><span class="nf">source</span><span class="w"> </span><span class="nx">/etc/profile</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="7-gradle-é¡¹ç›®è‡ªåŠ¨åŒ–å»ºæ„å·¥å…·å‘½ä»¤">7. gradle-é¡¹ç›®è‡ªåŠ¨åŒ–å»ºæ„å·¥å…·å‘½ä»¤</h1>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>gradle idea
gradlew assemble <span class="nt">-Dorg</span>.gradle.java.home<span class="o">=</span>D:<span class="se">\g</span>ongji<span class="se">\J</span>ava<span class="se">\j</span>dk-12.0.2
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="8-rmp">8. rmp</h1>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>yum groupinstall <span class="nt">--downloadonly</span> <span class="nt">--downloaddir</span><span class="o">=</span>/home/hadoop/desktop Desktop
rpm <span class="nt">-ivh</span> ./<span class="k">*</span>.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
rpm <span class="nt">-qa</span> | <span class="nb">grep </span>realvnc
rpm <span class="nt">-e</span> <span class="nt">--nodeps</span> realvnc-vnc-server-6.5.0.41730-1.x86_64
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="9-ç£ç›˜æŸ¥çœ‹">9. ç£ç›˜æŸ¥çœ‹ï¼š</h1>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">df</span> <span class="nt">-hl</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æŸ¥çœ‹æ‰€æœ‰ç£ç›˜ä½¿ç”¨ç‡</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">du</span> <span class="nt">-h</span> <span class="nt">--max-depth</span><span class="o">=</span>1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æœ€å¤§çš„æ–‡ä»¶æˆ–è·¯å¾„ã€‚ç»“æœå‘ç°æ˜¯æˆ‘çš„hadoop data ç›®å½•å ç”¨è¶…å¤§ï¼Œè¿˜æœ‰è‡ªå·±æµ‹è¯•ç”¨çš„æ•°æ®ï¼Œä¸æƒ³éšä¾¿æ¸…ç†ï¼Œæ‰€ä»¥æŸ¥çœ‹hdfsè·¯å¾„:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>hadoop fs <span class="nt">-du</span> <span class="nt">-h</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ­¤æ—¶å‘ç°å ç”¨ç©ºé—´æœ€å¤§çš„æ˜¯ hbaseçš„WALæ—¥å¿—å ç”¨æ¯”è¾ƒå¤§ï¼Œç›´æ¥åˆ é™¤ï¼Œé—®é¢˜è§£å†³ã€‚</p>

<h1 id="10-scpå‘½ä»¤">10. SCPå‘½ä»¤</h1>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>scp <span class="nt">-r</span> /root root@43.224.34.73:/home/lk
</pre></td></tr></tbody></table></code></pre></div></div>

<p>1Hblsqt# 
132.232.90.182 172.27.16.31
172.27.16.104
172.27.16.5</p>

<h1 id="11-linux-é‡å¯å…³æœº">11. Linux é‡å¯å…³æœº</h1>

<p>$ reboot â€”â€”â€”â€“é‡å¯
$ halt â€”â€”â€”â€”-å…³æœº</p>

<h1 id="12-ç«¯å£å’Œåº”ç”¨æŸ¥çœ‹">12. ç«¯å£å’Œåº”ç”¨æŸ¥çœ‹</h1>

<table>
  <tbody>
    <tr>
      <td>netstat -nptl</td>
      <td>grep 10000</td>
    </tr>
    <tr>
      <td>ps -ef</td>
      <td>grep dse</td>
    </tr>
  </tbody>
</table>

<h1 id="13-å»ºç«‹è½¯è¿æ¥ln--s">13. å»ºç«‹è½¯è¿æ¥ln -s</h1>

<p>ln -s /usr/java/jdk1.8.0_151/jre/bin/java /usr/bin/java 
ln -s /opt/jdk1.8.0_172/bin/jps /opt/jdk1.8.0_172/jre/bin/jps
ln -s /usr/java/jdk1.8.0_172-amd64/bin/jps /usr/java/jdk1.8.0_172-amd64/jre/bin/jps</p>

<h1 id="14-ç½‘ç»œé…ç½®">14. ç½‘ç»œé…ç½®</h1>

<h2 id="141-ç½‘ç»œé…ç½®æ–¹å¼1">14.1. ç½‘ç»œé…ç½®æ–¹å¼1</h2>

<p>å®‰è£…å®ŒLinuxç³»ç»Ÿåï¼Œæ— æ³•ä¸Šç½‘ ping www.baidu.com æç¤ºNetwork is unreachable
è§£å†³åŠæ³•ï¼š
cd /etc/sysconfig/network-scripts
vi ifcfg-enp0s3 ï¼ˆåç¼€ä¸ºæœ¬æœºè‡ªåŠ¨ç”Ÿæˆï¼‰</p>

<p>TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=enp0s3
UUID=fadf194d-7c3e-4b65-9ddc-8a0e780fc234
DEVICE=enp0s3
ONBOOT=yes
IPADDR=192.168.99.101
NETWORK=192.168.99.16
NETSTAT=255.255.255.0
GATEWAY=192.168.10.1
DNS1=8.8.8.8
DNS2=114.114.114.114</p>

<p>2ã€é‡å¯ç½‘å¡ service network restart</p>

<h3 id="1411-æ–°å»ºç½‘å¡">14.1.1. æ–°å»ºç½‘å¡</h3>

<p>cd /etc/sysconfig/network-scripts/</p>

<p>cp ifcfg-enp0s3 ifcfg-eth1</p>

<h3 id="1412-networkmanager">14.1.2. NetworkManager</h3>

<p>systemctl start NetworkManager
systemctl status NetworkManager
systemctl enable NetworkManager</p>

<h3 id="1413-ç½‘å¡é…ç½®ç•Œé¢-el7">14.1.3. ç½‘å¡é…ç½®ç•Œé¢ el7</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>nmtui
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å°±æ·»åŠ ä¸ªIPåœ°å€å…¶ä»–å…¨éƒ¨ä¸å˜
IP4 ADDR=192.168.19.20</p>

<p>ipé…ç½®</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>nm-connection-editor
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å…¶ä¸­Generalå‹¾é€‰ç¬¬ä¸€å’Œç¬¬äºŒä¸ª</p>

<p>IPV4 Settingsé€‰æ‹©
Mothod: Manual</p>

<p>åœ°å€é…ç½®å¦‚ä¸‹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">IPADDR</span><span class="o">=</span>192.168.19.20
<span class="nv">GATEWAY</span><span class="o">=</span>192.168.19.2
<span class="nv">NETMASK</span><span class="o">=</span>255.255.255.0
DNS <span class="nv">Servers</span><span class="o">=</span>192.168.19.2
<span class="nv">DNS1</span><span class="o">=</span>118.118.118.9
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="1414-è®¾ç½®ip">14.1.4. è®¾ç½®IP</h3>

<p>nmcli connection show</p>

<p>nmcli connection modify enp0s3 ipv4.addresses 192.168.99.101/24 ipv4.gateway 192.168.99.1 connection.autoconnect yes ipv4.method manual</p>

<p>nmcli connection up enp0s3</p>

<p>nmcli connection show <nmcliName></nmcliName></p>

<p>nmcli connection modify enp0s3 ipv4.addresses 192.168.99.101/24</p>

<h3 id="1415-ç½‘å¡ç»ˆç«¯å›¾å½¢åŒ–å·¥å…·">14.1.5. ç½‘å¡ç»ˆç«¯å›¾å½¢åŒ–å·¥å…·</h3>

<p>nm-connection-editor</p>

<h3 id="1416-é‡å¯ç½‘ç»œ">14.1.6. é‡å¯ç½‘ç»œ</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>systemctl restart network
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="1417-æ£€æŸ¥ipåœ°å€æ˜¯å¦æ­£ç¡®">14.1.7. æ£€æŸ¥IPåœ°å€æ˜¯å¦æ­£ç¡®</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ifconfig
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="15-å…³é—­é˜²ç«å¢™å¹¶è®¾ç½®å¼€æœºä¸å¯åŠ¨">15. å…³é—­é˜²ç«å¢™å¹¶è®¾ç½®å¼€æœºä¸å¯åŠ¨</h1>

<h2 id="151-ä¸´æ—¶å…³é—­é˜²ç«å¢™">15.1. ä¸´æ—¶å…³é—­é˜²ç«å¢™</h2>

<p>el6:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>iptables <span class="nt">-F</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>el7:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>firewalld <span class="nt">-F</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¯Šæ–­åŸŸåï¼š19c406791k.imwork.net åŸŸåIPåœ°å€æŒ‡å‘ï¼š47.98.161.190 è½¬å‘æœåŠ¡å™¨IPï¼š47.98.161.190 åŸŸåå·²æ¿€æ´»å†…ç½‘ç©¿é€åŠŸèƒ½ï¼Œå¹¶ä¸è½¬å‘æœåŠ¡å™¨IPæŒ‡å‘ä¸€è‡´   æ˜ å°„ï¼š19c406791k.imwork.net:31025 å±€åŸŸç½‘æœåŠ¡å™¨ï¼š
192.168.19.129:1723 è¿æ¥è½¬å‘æœåŠ¡å™¨æˆåŠŸ   å±€åŸŸç½‘æœåŠ¡å™¨è¿æ¥æˆåŠŸ</p>

<h2 id="152-å…³é—­é˜²ç«å¢™è®¾ç½®å¼€æœºä¸å¯åŠ¨">15.2. å…³é—­é˜²ç«å¢™è®¾ç½®å¼€æœºä¸å¯åŠ¨</h2>

<p><strong>el6</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>service iptables stop
chkconfig iptables off
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>el7</strong></p>

<p>systemctl status firewalld</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>systemctl stop firewalld
systemctl disable firewalld 
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="16-å…³é—­selinux">16. å…³é—­SELinux</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>getenforce
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿”å›
Enforcing</p>

<p>æ‰§è¡Œå…³é—­SELinux</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>setenforce 0
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/SELINUX=enforcing/SELINUX=disabled/g'</span> /etc/selinux/config
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ£€æŸ¥SELinux</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>getenforce
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿”å›
Permissive</p>

<h1 id="17-ä¿®æ”¹æ—¶åŒº">17. ä¿®æ”¹æ—¶åŒº</h1>

<h2 id="171-æœ€æ–°ç‰ˆæœ¬æ–¹æ³•">17.1. æœ€æ–°ç‰ˆæœ¬æ–¹æ³•</h2>

<p>tzselectï¼š
æ‰§è¡Œtzselectå‘½ä»¤â€“&gt;é€‰æ‹©Asiaâ€“&gt;é€‰æ‹©Chinaâ€“&gt;é€‰æ‹©east China - Beijing, Guangdong, Shanghai, etcâ€“&gt;ç„¶åè¾“å…¥1ã€‚
æ‰§è¡Œtzselectå‘½ä»¤â€“&gt;5â€“&gt;9â€“&gt;é€‰æ‹©east China - Beijing, Guangdong, Shanghai, etcâ€“&gt;ç„¶åè¾“å…¥1ã€‚</p>

<p>TZ=â€™Asia/Shanghaiâ€™; export TZ
dateå‘½ä»¤æŸ¥çœ‹åˆ°ä¸ºCST, å³ä¸­å›½æ ‡å‡†æ—¶é—´</p>

<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>vim /etc/sysconfig/clock

<span class="nv">ZONE</span><span class="o">=</span><span class="s2">"Asia/Shanghai"</span>
<span class="nv">UTC</span><span class="o">=</span><span class="nb">false
</span><span class="nv">ARC</span><span class="o">=</span><span class="nb">false</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>//linuxçš„æ—¶åŒºè®¾ç½®ä¸ºä¸Šæµ·æ—¶åŒº</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nb">rm</span> /etc/localtime
<span class="nb">ln</span> <span class="nt">-sf</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

<span class="nb">ln</span> <span class="nt">-sf</span> /usr/share/zoneinfo/UTC /etc/localtime

timedatectl
</pre></td></tr></tbody></table></code></pre></div></div>

<p>//è®¾ç½®ç¡¬ä»¶æ—¶é—´å’Œç³»ç»Ÿæ—¶é—´ä¸€è‡´å¹¶æ ¡å‡†
hwclock â€“systohc</p>

<h2 id="172-æŸ¥çœ‹ç³»ç»Ÿæ—¶åŒº">17.2. æŸ¥çœ‹ç³»ç»Ÿæ—¶åŒº</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">date</span> <span class="nt">-R</span><span class="p">;</span> <span class="nb">date</span> +%z
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="o">[</span>root@hadoop05 ~]#  <span class="nb">date</span> <span class="nt">-R</span><span class="p">;</span> <span class="nb">date</span> +%z  
Thu, 10 Nov 2016 17:20:24 <span class="nt">-08001</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦‚IOS6.6ç‰ˆæœ¬çš„æ˜¯-08001ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨çš„å¸‚åŒºæ˜¯ä¸Šæµ·çš„+8000ä¸œ8æ—¶åŒºï¼Œè¿™æ ·æ—¶é—´å°±ä¸å‡†éœ€è¦è¿›è¡Œæ—¶åŒºè°ƒæ•´+8000ä¸œ8æ—¶åŒº</p>

<p>æ—¶åŒºè°ƒæ•´ä¸Šæµ·+8000ä¸œ8æ—¶åŒº</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cp</span> /etc/localtime /etc/localtime.bak
<span class="nb">cp</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å†æ£€æŸ¥æ—¶åŒºå’Œæ—¶é—´æ˜¯å¦å‡†ç¡®</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">date</span> <span class="nt">-R</span><span class="p">;</span> <span class="nb">date</span> +%z
<span class="nb">date</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre> root@hadoop04 ~]# <span class="nb">date</span> <span class="nt">-R</span><span class="p">;</span> <span class="nb">date</span> +%z
Fri, 11 Nov 2016 09:25:26 +0800
</pre></td></tr></tbody></table></code></pre></div></div>

<p>+0800æ—¶é—´ä¹Ÿè‡ªåŠ¨tongbuæˆåŠŸã€‚å’ŒåŒ—äº¬æ—¶é—´ç›¸åŒ</p>

<h2 id="173-è®¾ç½®æ—¶åŒºæ–¹å¼äºŒå¯é€‰">17.3. è®¾ç½®æ—¶åŒºæ–¹å¼äºŒ(å¯é€‰)</h2>

<h3 id="1731-å°†linuxç³»ç»Ÿæ—¶é’Ÿtongbuåˆ°è¿œç¨‹ntpæœåŠ¡å™¨">17.3.1. å°†Linuxç³»ç»Ÿæ—¶é’Ÿtongbuåˆ°è¿œç¨‹NTPæœåŠ¡å™¨</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>timedatectl set-ntp <span class="nb">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="1732-linuxä¸­è®¾ç½®æœ¬åœ°æ—¶åŒº">17.3.2. Linuxä¸­è®¾ç½®æœ¬åœ°æ—¶åŒº</h3>

<p>ä½¿ç”¨set-timezoneå¼€å…³ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚
ä¸­å›½ä¸Šæµ·çš„æ—¶åŒºï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>timedatectl set-timezone <span class="s2">"Asia/Shanghai"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="174-å–æ¶ˆè®¢é˜…æœåŠ¡el7">17.4. å–æ¶ˆè®¢é˜…æœåŠ¡ï¼ˆel7ï¼‰</h2>

<p>è®¢é˜…æ’ä»¶æç¤ºï¼šThis system is not registered with an entitlement server. You can use subscription-manager to register.</p>

<p>æ¯æ¬¡yumè°ƒç”¨(ä¸ç¦æ‰pluginsçš„æƒ…å†µä¸‹)ï¼Œéƒ½ä¼šæ›´æ–°æ­¤æ–‡ä»¶ã€‚
å› æ­¤ï¼Œä¸ºäº†ä¸å†²çªï¼Œå¯ä»¥å¦‚ä¸‹æ“ä½œ: åœæ­¢æ‰è¯¥æ’ä»¶çš„ä½¿ç”¨ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æŠŠenable=0å³å¯ã€‚</p>

<p>[root@micocube ~] vim /etc/yum/pluginconf.d/subscription-manager.conf
[main]
enabled=0           #å°†å®ƒç¦ç”¨æ‰</p>

<h2 id="175-åˆ›å»ºæœ¬åœ°yumæº">17.5. åˆ›å»ºæœ¬åœ°yumæº</h2>

<h3 id="1751-é…ç½®yumä»“åº“æœ¬åœ°yumæº">17.5.1. é…ç½®yumä»“åº“ï¼šæœ¬åœ°yumæº</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">rm</span> <span class="nt">-rf</span> /etc/yum.repos.d/<span class="k">*</span>
vim /etc/yum.repos.d/redhat7.repo
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¿®æ”¹å¦‚ä¸‹å†…å®¹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="o">[</span>rhel]
<span class="nv">name</span><span class="o">=</span>rhel
<span class="nv">baseurl</span><span class="o">=</span>file:///media/cdrom
<span class="nv">enabled</span><span class="o">=</span>1
<span class="nv">gpgcheck</span><span class="o">=</span>0
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="1752-åˆ›å»ºæœ¬åœ°yumåº“ç›®å½•">17.5.2. åˆ›å»ºæœ¬åœ°yumåº“ç›®å½•</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> /media/cdrom
</pre></td></tr></tbody></table></code></pre></div></div>

<p>df -h æ£€æŸ¥é•œåƒç›˜æ˜¯å¦æˆåŠŸ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">df</span> <span class="nt">-h</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦‚ä¸‹</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="nf">root</span><span class="err">@</span><span class="nx">localhost</span><span class="w"> </span><span class="nx">root</span><span class="p">]</span><span class="c"># df -h</span><span class="w">
</span><span class="nf">Filesystem</span><span class="w">             </span><span class="nx">Size</span><span class="w">  </span><span class="nx">Used</span><span class="w"> </span><span class="nx">Avail</span><span class="w"> </span><span class="nx">Use</span><span class="o">%</span><span class="w"> </span><span class="nx">Mounted</span><span class="w"> </span><span class="nx">on</span><span class="w">
</span><span class="nf">/dev/mapper/rhel-root</span><span class="w">   </span><span class="nx">50G</span><span class="w">  </span><span class="nx">2.9G</span><span class="w">   </span><span class="nx">48G</span><span class="w">   </span><span class="nx">6</span><span class="o">%</span><span class="w"> </span><span class="nx">/</span><span class="w">
</span><span class="nf">devtmpfs</span><span class="w">               </span><span class="nx">3.8G</span><span class="w">     </span><span class="nx">0</span><span class="w">  </span><span class="nx">3.8G</span><span class="w">   </span><span class="nx">0</span><span class="o">%</span><span class="w"> </span><span class="nx">/dev</span><span class="w">
</span><span class="nf">tmpfs</span><span class="w">                  </span><span class="nx">3.9G</span><span class="w">   </span><span class="nx">88K</span><span class="w">  </span><span class="nx">3.9G</span><span class="w">   </span><span class="nx">1</span><span class="o">%</span><span class="w"> </span><span class="nx">/dev/shm</span><span class="w">
</span><span class="nf">tmpfs</span><span class="w">                  </span><span class="nx">3.9G</span><span class="w">  </span><span class="nx">8.9M</span><span class="w">  </span><span class="nx">3.9G</span><span class="w">   </span><span class="nx">1</span><span class="o">%</span><span class="w"> </span><span class="nx">/run</span><span class="w">
</span><span class="nf">tmpfs</span><span class="w">                  </span><span class="nx">3.9G</span><span class="w">     </span><span class="nx">0</span><span class="w">  </span><span class="nx">3.9G</span><span class="w">   </span><span class="nx">0</span><span class="o">%</span><span class="w"> </span><span class="nx">/sys/fs/cgroup</span><span class="w">
</span><span class="nf">/dev/mapper/rhel-home</span><span class="w">   </span><span class="nx">42G</span><span class="w">   </span><span class="nx">38M</span><span class="w">   </span><span class="nx">42G</span><span class="w">   </span><span class="nx">1</span><span class="o">%</span><span class="w"> </span><span class="nx">/home</span><span class="w">
</span><span class="nf">/dev/sda1</span><span class="w">              </span><span class="nx">497M</span><span class="w">  </span><span class="nx">157M</span><span class="w">  </span><span class="nx">340M</span><span class="w">  </span><span class="nx">32</span><span class="o">%</span><span class="w"> </span><span class="nx">/boot</span><span class="w">
</span><span class="nf">tmpfs</span><span class="w">                  </span><span class="nx">781M</span><span class="w">   </span><span class="nx">12K</span><span class="w">  </span><span class="nx">781M</span><span class="w">   </span><span class="nx">1</span><span class="o">%</span><span class="w"> </span><span class="nx">/run/user/0</span><span class="w">
</span><span class="nf">/dev/sr0</span><span class="w">               </span><span class="nx">3.8G</span><span class="w">  </span><span class="nx">3.8G</span><span class="w">     </span><span class="nx">0</span><span class="w"> </span><span class="nx">100</span><span class="o">%</span><span class="w"> </span><span class="nx">/run/media/root/RHEL-7.2</span><span class="w"> </span><span class="nx">Server.x86_64</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="176-å¯¹é•œåƒç£ç›˜è¿›è¡Œyumåº“ç›®å½•æŒ‚ç›˜">17.6. å¯¹é•œåƒç£ç›˜è¿›è¡Œyumåº“ç›®å½•æŒ‚ç›˜</h2>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">mount</span><span class="w"> </span><span class="nx">/dev/sr0</span><span class="w"> </span><span class="nx">/media/cdrom</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="177-yumé»˜è®¤å®‰è£…æ— æ³•ä½¿ç”¨">17.7. YUMé»˜è®¤å®‰è£…æ— æ³•ä½¿ç”¨</h2>

<h3 id="1771-æŸ¥çœ‹redhat-70ç³»ç»Ÿæœ¬èº«æ‰€å®‰è£…çš„é‚£äº›yumè½¯ä»¶åŒ…">17.7.1. æŸ¥çœ‹redhat 7.0ç³»ç»Ÿæœ¬èº«æ‰€å®‰è£…çš„é‚£äº›yumè½¯ä»¶åŒ…</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nf">rpm</span><span class="w"> </span><span class="nt">-qa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">grep</span><span class="w"> </span><span class="nx">yum</span><span class="w">

</span><span class="nf">yum-utils-1.1.31-50.el7.noarch</span><span class="w">
</span><span class="nx">yum-metadata-parser-1.1.4-10.el7.x86_64</span><span class="w">
</span><span class="nf">yum-3.4.3-161.el7.noarch</span><span class="w">
</span><span class="nx">PackageKit-yum-1.1.10-1.el7.x86_64</span><span class="w">
</span><span class="nf">yum-rhn-plugin-2.0.1-10.el7.noarch</span><span class="w">
</span><span class="nx">yum-langpacks-0.4.2-7.el7.noarch</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="178-å¸è½½è¿™äº›è½¯ä»¶åŒ…">17.8. å¸è½½è¿™äº›è½¯ä»¶åŒ…</h2>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="nf">yum-updateonboot-1.1.31-52.el7.noarch</span><span class="w">
</span><span class="nx">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">yum-rhn-plugin-2.0.1-10.el7.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">
</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">yum-metadata-parser-1.1.4-10.el7.x86_64</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">
</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">yum-3.4.3-163.el7.centos.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">
</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">yum-utils-1.1.31-50.el7.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">
</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">yum-updateonboot-1.1.31-52.el7.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">

</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">yum-langpacks-0.4.2-7.el7.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">

</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">python-kitchen-1.1.1-5.el7.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">
</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="nx">python-chardet-2.2.1-1.el7_1.noarch</span><span class="w"> </span><span class="nt">--nodeps</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="179-ä¸‹è½½åŒ…å¹¶å®‰è£…">17.9. ä¸‹è½½åŒ…å¹¶å®‰è£…</h2>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/python-kitchen-1.1.1-5.el7.noarch.rpm</span><span class="w">
</span><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/python-chardet-2.2.1-3.el7.noarch.rpm</span><span class="w">
</span><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/yum-3.4.3-163.el7.centos.noarch.rpm</span><span class="w">
</span><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm</span><span class="w">
</span><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-52.el7.noarch.rpm</span><span class="w">
</span><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/yum-updateonboot-1.1.31-52.el7.noarch.rpm</span><span class="w">
</span><span class="nf">wget</span><span class="w"> </span><span class="nx">http://mirrors.163.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-52.el7.noarch.rpm</span><span class="w">

</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-ivh</span><span class="w"> </span><span class="nx">python-</span><span class="o">*</span><span class="w">
</span><span class="nf">rpm</span><span class="w"> </span><span class="nt">-ivh</span><span class="w"> </span><span class="nx">yum-</span><span class="o">*</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="1710-é…ç½®ntpæœåŠ¡">17.10. é…ç½®NTPæœåŠ¡</h2>

<p>å¤–ç½‘ç¯å¢ƒï¼š
$ yum install ntp</p>

<p>å†…ç½‘ç¯å¢ƒï¼š
a. åŒæ ·ç³»ç»Ÿçš„Linuxå¤–ç½‘æœåŠ¡å™¨ä¸‹è½½rmpåŒ…å’Œä¾èµ–åŒ…
cd /home/hadoop/ntp
yumdownloader â€“resolve ntp
æˆ–
yum install all â€“downloadonly â€“downloaddir=/home/hadoop/ntp ntp</p>

<p>b. æ‹·è´/home/hadoop/ntp/åŒ…å¸¦å†…ç½‘æœåŠ¡å™¨åŒæ ·ç›®å½•ä¸‹</p>

<p>c. å†…ç½‘å®‰è£…
cd /home/hadoop/ntp/
rpm -ivh ./*.rpm â€“nodeps â€“force</p>

<h2 id="1711-å¯åŠ¨-ntp">17.11. å¯åŠ¨ ntp</h2>

<p>$ service ntpd start</p>

<h2 id="1712-è®¾ç½®å¼€æœºå¯åŠ¨">17.12. è®¾ç½®å¼€æœºå¯åŠ¨:</h2>

<p>$ chkconfig ntpd on</p>

<h2 id="1713-åŒæ­¥æ—¶é—´æœåŠ¡å™¨">17.13. åŒæ­¥æ—¶é—´æœåŠ¡å™¨</h2>

<p>vi /etc/ntp.conf</p>

<p>æŠŠå…¶ä¸­çš„serverå…¨éƒ¨æ³¨é”€ï¼Œå¹¶æ·»åŠ è¿œç¨‹æ—¶é—´æœåŠ¡å™¨æˆ–è€…masterèŠ‚ç‚¹</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c"># server 0.centos.pool.ntp.org iburst  </span><span class="w">
</span><span class="c"># server 1.centos.pool.ntp.org iburst  </span><span class="w">
</span><span class="c"># server 2.centos.pool.ntp.org iburst  </span><span class="w">
</span><span class="c"># server 3.centos.pool.ntp.org iburst</span><span class="w">

</span><span class="c"># é˜¿é‡Œäº‘æ—¶é—´æœåŠ¡å™¨</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp1.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp2.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp3.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp4.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp5.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp6.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">ntp7.aliyun.com</span><span class="w"> </span><span class="nx">iburst</span><span class="w">

</span><span class="c"># æœ¬åœ°ntpæœåŠ¡å™¨</span><span class="w">
</span><span class="nf">server</span><span class="w"> </span><span class="nx">master.ip.host</span><span class="w"> </span><span class="nx">iburst</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="1714-é‡å¯ntpæœåŠ¡">17.14. é‡å¯ntpæœåŠ¡</h2>

<p>$ service ntpd restart</p>

<p>æ£€æŸ¥æ˜¯å¦æˆåŠŸï¼Œç”¨ntpstatå‘½ä»¤æŸ¥çœ‹åŒæ­¥çŠ¶æ€ï¼Œå‡ºç°ä»¥ä¸‹çŠ¶æ€ä»£è¡¨å¯åŠ¨æˆåŠŸï¼š
$ ntpstat</p>

<h1 id="18-ä¿®æ”¹ä¸»æœºåhostname">18. ä¿®æ”¹ä¸»æœºåhostname</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vim /etc/sysconfig/network
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç¼–è¾‘ä¸ºä¸‹é¢å†…å®¹ï¼Œå…¶ä¸­Masterä¸ºå®šä¹‰ä¸»æœºåï¼ŒGATEWAYä¸ºæœ¬æœºçš„IPåœ°å€</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>NETWORKING=yes
HOSTNAME=Master
GATEWAY=192.168.19.20
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="19-ä¿®æ”¹hosts">19. ä¿®æ”¹hosts</h1>

<p>å³ipä¸ä¸»æœºåçš„å¯¹åº”å…³ç³»</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vim /etc/hosts
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç¼–è¾‘ä¸ºä¸‹é¢å†…å®¹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>192.168.18.205  des01
192.168.18.206  des02
192.168.18.207  des03
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="20-sshæ— å¯†ç ç™»é™†">20. sshæ— å¯†ç ç™»é™†</h1>

<h2 id="201-ç”Ÿæˆæ— å¯†ç çš„å¯†é’¥å¯¹">20.1. ç”Ÿæˆæ— å¯†ç çš„å¯†é’¥å¯¹</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> rsa
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(ä¸€è·¯å›è½¦ï¼Œç”Ÿæˆæ— å¯†ç çš„å¯†é’¥å¯¹ã€‚)</p>

<h2 id="202-å°†å…¬é’¥æ·»åŠ åˆ°è®¤è¯æ–‡ä»¶ä¸­">20.2. å°†å…¬é’¥æ·»åŠ åˆ°è®¤è¯æ–‡ä»¶ä¸­</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">cat</span> ~/.ssh/id_rsa.pub <span class="o">&gt;&gt;</span> ~/.ssh/authorized_keys
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="203-è®¾ç½®authorized_keysçš„è®¿é—®æƒé™">20.3. è®¾ç½®authorized_keysçš„è®¿é—®æƒé™</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">chmod </span>600 ~/.ssh/authorized_keys
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="204-sshæ— å¯†ç è¯ä¹¦å‘ç»™å…¶ä»–èŠ‚ç‚¹">20.4. sshæ— å¯†ç è¯ä¹¦å‘ç»™å…¶ä»–èŠ‚ç‚¹</h2>

<p>ssh-copy-id -i ~/.ssh/id_rsa.pub hadoop01
ssh-copy-id -i ~/.ssh/id_rsa.pub hadoop02
ssh-copy-id -i ~/.ssh/id_rsa.pub hadoop03
ssh-copy-id -i ~/.ssh/id_rsa.pub hadoop04</p>

<p>ssh-copy-id -i ~/.ssh/id_rsa.pub tbds-19.203</p>

<h2 id="205-å…³é—­å¤§é€æ˜å‹ç¼©">20.5. å…³é—­å¤§é€æ˜å‹ç¼©</h2>

<p>echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag
echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</p>

<p>ç„¶åå†™å…¥/etc/rc.local</p>

<h1 id="21-ç¦æ­¢äº¤æ¢ç©ºé—´">21. ç¦æ­¢äº¤æ¢ç©ºé—´</h1>

<h1 id="22-linux-ç³»ç»Ÿè®¾ç½®shæ–‡ä»¶å¼€æœºå¯åŠ¨">22. Linux ç³»ç»Ÿè®¾ç½®shæ–‡ä»¶å¼€æœºå¯åŠ¨</h1>

<p>å·¥ä½œä¸­æœ‰ä¸€ä¸ªlinuxä¸‹çš„æœåŠ¡éœ€è¦å¯åŠ¨ï¼Œä½†æ˜¯æœºå™¨æ€»æ˜¯æ–­ç”µï¼Œå¯¼è‡´éœ€è¦åå¤å¯åŠ¨ï¼Œæ‰¾äº†ä¸€ä¸‹å¼€æœºè‡ªå¯åŠ¨çš„æ–¹æ³•ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚Linuxè®¾ç½®å¼€æœºè‡ªå¯åŠ¨éå¸¸ç®€å•ï¼Œåªè¦æ‰¾åˆ°rc.localæ–‡ä»¶ï¼Œå°†ä½ éœ€è¦è‡ªå¯åŠ¨çš„æ–‡ä»¶åŠ è¿›å»å³å¯ã€‚æˆ‘çš„linuxæœåŠ¡å™¨çš„rc.localæ–‡ä»¶åœ¨/etcæ–‡ä»¶å¤¹ä¸‹ã€‚rc.localæ–‡ä»¶æ²¡æœ‰ä¿®æ”¹ä¹‹å‰æ˜¯è¿™æ ·æ»´ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">#</span>
<span class="c"># This script will be executed *after* all the other init scripts.</span>
<span class="c"># You can put your own initialization stuff in here if you don't</span>
<span class="c"># want to do the full Sys V style init stuff.</span>

<span class="nb">touch</span> /var/lock/subsys/local
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è®¾ç½®rc.localæ˜¯å¯æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">chmod +x /etc/rc.d/rc.local</code>
åœ¨æ–‡ä»¶ä¸‹æ–¹ç›´æ¥æ·»åŠ ä½ éœ€è¦è‡ªå¯åŠ¨æ–‡ä»¶çš„è·¯å¾„ï¼Œç„¶åç›´æ¥å†™ä¸Šå¯åŠ¨å‘½ä»¤ï¼Œä¿®æ”¹åçš„æ–‡ä»¶å¦‚ä¸‹ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"cd /usr/share/dse-studio/datastax-studio-6.0.0"</span> <span class="o">&gt;&gt;</span> /etc/rc.local
<span class="nb">echo</span> <span class="s2">"nohup bin/datastax.sh &gt;&gt; /var/log/datastaxstudio/output.log 2&gt;&amp;1 &amp;"</span> <span class="o">&gt;&gt;</span> /etc/rc.local
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">#</span>
<span class="c"># This script will be executed *after* all the other init scripts.</span>
<span class="c"># You can put your own initialization stuff in here if you don't</span>
<span class="c"># want to do the full Sys V style init stuff.</span>

<span class="nb">touch</span> /var/lock/subsys/local

<span class="nb">cd</span> /usr/share/dse-studio/datastax-studio-6.0.0
<span class="nb">nohup </span>bin/datastax.sh <span class="o">&gt;&gt;</span> /var/log/datastaxstudio/output.log 2&gt;&amp;1 &amp;
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="23-å®‰è£…yumå¹¶é…ç½®é˜¿é‡Œæº">23. å®‰è£…Yumå¹¶é…ç½®é˜¿é‡Œæº</h1>

<blockquote>
  <p>redhatç³»ç»Ÿä¸­ï¼Œå¦‚æœä½ æƒ³è¦æ›´æ–°yumä»“åº“ï¼Œå®ƒä¼šæç¤ºè®©ä½ æ³¨å†Œæ‰èƒ½æ›´æ–°ï¼Œå› ä¸ºcentoså’ŒredhatåŸºæœ¬ç›¸åŒï¼Œæ‰€ä»¥æˆ‘æŠŠyumè¿™ä¸€å¥—å…¨æ¢æˆcentosçš„ã€‚</p>
</blockquote>

<ol>
  <li>åˆ é™¤å·²å®‰è£…çš„yumåŒ…(ä¸å¿…é¡»)</li>
</ol>

<p>cd /etc/rpm/</p>

<p>rm -rf ./m*</p>

<ol>
  <li>ä¸‹è½½centosçš„yumåŒ…(ä¸å¿…é¡»)</li>
</ol>

<p>wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-40.el7.noarch.rpm
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-158.el7.centos.noarch.rpm
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-45.el7.noarch.rpm
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-urlgrabber-3.10-8.el7.noarch.rpm</p>

<p>å¦‚æœå‡ºç°404é”™è¯¯ï¼Œè¯·å»https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/æœç´¢å…³é”®è¯æŸ¥è¯¢æœ€æ–°rpmåŒ…çš„é“¾æ¥ã€‚</p>

<ol>
  <li>å¼ºåˆ¶å®‰è£…rpmåŒ…</li>
</ol>

<p>â€“force â€“nodepsä¸ºå¿½ç•¥ä¾èµ–æ£€æµ‹çš„å¼ºåˆ¶å®‰è£…</p>

<p>rpm -ivh python-urlgrabber-3.10-8.el7.noarch.rpm â€“force â€“nodeps</p>

<p>rpm -ivh yum* â€“force â€“nodeps</p>

<ol>
  <li>æŸ¥çœ‹yumåŒ…æ˜¯å¦å®‰è£…å¥½</li>
</ol>

<p>[root@localhost yum.repos.d]# rpm -qa |grep yum
yum-metadata-parser-1.1.4-10.el7.x86_64
yum-utils-1.1.31-45.el7.noarch
yum-3.4.3-158.el7.centos.noarch
yum-plugin-fastestmirror-1.1.31-45.el7.noarch</p>

<ol>
  <li>ä¿®æ”¹repo</li>
</ol>

<p>ä¸‹è½½æºæ–‡ä»¶</p>

<p>curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
éœ€è¦æŠŠCentos-7.repoæ–‡ä»¶ä¸­çš„$releaseverå…¨éƒ¨æ›¿æ¢ä¸º7</p>

<p>67  cd /etc/yum.repos.d/
   68  ls
   69  vim CentOS-Base.repo
åœ¨vimä¸­æ‰§è¡Œ:%s/$releasever/7/gå¿«é€Ÿæ›¿æ¢ã€‚ä¿å­˜é€€å‡ºã€‚</p>

<ol>
  <li>æ¸…ç©ºé‡è½½yum</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">yum</span> <span class="n">clean</span> <span class="k">all</span>
<span class="n">yum</span> <span class="k">update</span>
<span class="o">#</span> <span class="err">æœ€åæŸ¥çœ‹ä¸€ä¸‹</span><span class="n">yum</span><span class="err">åˆ—è¡¨</span>
<span class="n">yum</span> <span class="n">list</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="24-yum-éœ€è¦çš„rpmåŒ…">24. yum éœ€è¦çš„rpmåŒ…</h1>

<p>el6 :
python-urlgrabber-3.9.1-9.el6.noarch
yum-utils-1.1.30-14.el6.noarch
yum-metadata-parser-1.1.2-16.el6.x86_64
yum-plugin-security-1.1.30-14.el6.noarch
yum-3.2.29-40.el6.noarch</p>

<p>Linux ä¸‹è½½æ–¹å¼ä¸€</p>

<p>wget https://mirrors.aliyun.com/centos/6/os/x86_64/Packages/python-urlgrabber-3.9.1-11.el6.noarch.rpm
wget https://mirrors.aliyun.com/centos/6/os/x86_64/Packages/yyum-utils-1.1.30-41.el6.noarch.rpm
wget https://mirrors.aliyun.com/centos/6/os/x86_64/Packages/yum-metadata-parser-1.1.2-16.el6.x86_64.rpm 
wget https://mirrors.aliyun.com/centos/6/os/x86_64/Packages/yum-plugin-security-1.1.30-41.el6.noarch.rpm<br />
wget https://mirrors.aliyun.com/centos/6/os/x86_64/Packages/yum-3.2.29-81.el6.centos.noarch.rpm</p>

<p>linux ä¸‹è½½æ–¹å¼äºŒï¼Œç¦»çº¿ä¸‹è½½æ‹·è´ï¼Œå¯çœ‹ä¸‹é¢æ–¹å¼</p>

<blockquote>
  <p>a. å¤–ç½‘yum install â€“downloadonly â€“downloaddir=/home/hadoop/yum/ yum*
b. ç„¶åuç›˜æ‹·è´/home/hadoop/yum/ç›®å½•ä¸‹rmpåˆ°å†…ç½‘ç¯å¢ƒæ‰§è¡Œ
c. rpm -ivh ./*.rpm â€“nodeps â€“force</p>
</blockquote>

<h1 id="25-yum-å¤–ç½‘æœåŠ¡å™¨ä¸‹è½½rpmåŒ…åˆ°å†…ç½‘æ— æ³•è”ç½‘çš„æœåŠ¡å™¨">25. yum å¤–ç½‘æœåŠ¡å™¨ä¸‹è½½rpmåŒ…åˆ°å†…ç½‘ï¼ˆæ— æ³•è”ç½‘çš„æœåŠ¡å™¨ï¼‰</h1>

<p>è‡ªå·±æ‰¾ä¸€å°å¯ä»¥è”ç½‘çš„æœºå™¨ï¼Œå®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œè£…ä¸Šç›¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œä»€ä¹ˆå…¶ä»–çš„è½¯ä»¶éƒ½ä¸è¦å®‰è£…ï¼Œå¦‚æœä½ çš„å†…ç½‘ç¯å¢ƒrpmçš„æ—¶å€™ï¼Œéœ€è¦ä»€ä¹ˆä¾èµ–ï¼Œä½ å°±ç›´æ¥åœ¨å¯ä»¥è”ç½‘çš„æœºå™¨ä¸Šæ‰§è¡Œï¼Œæ‰§è¡Œçš„å‘½ä»¤ä¸ºï¼š</p>

<p>æ–¹å¼ä¸€ï¼š</p>

<ul>
  <li>yum -install â€“downloadonly â€“downloaddir=/root/ ä½ çš„è½¯ä»¶</li>
</ul>

<p>æ–¹å¼äºŒï¼š</p>

<ul>
  <li>yumdownloader â€“downloaddir=/home/hadoop/è½¯ä»¶å â€“resolve è½¯ä»¶å*</li>
</ul>

<p>ç„¶åå°±ä¼šåªä¸‹è½½ï¼Œä¸å®‰è£…ï¼Œé€šè¿‡Uç›˜æ‹·è´åˆ°å†…ç½‘ç¯å¢ƒ, æ¯”å¦‚å®‰è£…httpd</p>

<ul>
  <li>cd /home/hadoop/http</li>
  <li>rpm -ivh ./*.rpm â€“nodeps â€“force</li>
</ul>

<p>è¿™æ¡å‘½ä»¤ä¸­ â€“nodeps æ˜¯ä¸æ£€æŸ¥ä¾èµ– â€“forceæ˜¯è¦†ç›–å®‰è£…ï¼Œå®‰è£…å³å¯ã€‚</p>

<h2 id="251">25.1.</h2>

<p>vim /etc/yum/pluginconf.d/subscription-manager.conf</p>

<p>[main]
enabled=0           #å°†å®ƒç¦ç”¨æ‰</p>

<h2 id="252-yumæ¸…æ¥šç¼“å­˜">25.2. yumæ¸…æ¥šç¼“å­˜</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>yum clean all
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>yum list
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="26-yumå®‰è£…å¤–éƒ¨è¿œç¨‹vnc-å¯é€‰">26. yumå®‰è£…å¤–éƒ¨è¿œç¨‹VNC ï¼ˆå¯é€‰ï¼‰</h1>

<p>yum install tigervnc-server</p>

<h1 id="27-å®‰è£…httpdå·¥å…·">27. å®‰è£…httpdå·¥å…·</h1>

<p>é€‰æ‹©å…¶ä¸­ä¸€å°æœåŠ¡å™¨éƒ¨ç½²httpdï¼Œåˆ›å»ºæœ¬åœ°æº</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> /tmp/httpd
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ‹·è´ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶åˆ°/tmp/httpdæ–‡ä»¶ç›®å½•ä¸‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>httpd-2.2.15-39.el6.centos.x86_64.rpm
httpd-tools-2.2.15-39.el6.centos.x86_64.rpm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿è¡Œä¸‹é¢å‘½ä»¤è¿›è¡Œå®‰è£…</p>

<p>el6 å®‰è£…</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>	yum localinstall â€“nogpgcheck httpd<span class="k">*</span>
	æˆ–è€…
	rpm <span class="nt">-ivh</span> httpd-2.2.15-39.el6.centos.x86_64.rpm httpd-tools-2.2.15-39.el6.centos.x86_64.rpm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>el7 å®‰è£…
   éœ€è¦ä¾èµ–rpmæ–‡ä»¶</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>    apr-1.4.8-3.el7.x86_64
	apr-util-1.5.2-6.el7.x86_64
	httpd-tools-2.4.6-40.el7.x86_64
	mailcap-2.1.41-2.el7.noarch 
	httpd-2.4.6-40.el7.x86_64
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å®‰è£…å‘½ä»¤ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>    rpm -ivh httpd-2.4.6-40.el7.x86_64.rpm httpd-tools-2.4.6-40.el7.x86_64.rpm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>åˆ›å»ºhttpçš„rpmåº“åœ°å€/dse/enterprise/</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mkdir -p /var/www/html/dse/enterprise/
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æˆæƒç›®å½•</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>chmod -R ugo+rx /var/www/html/dse/enterprise/
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¯åŠ¨httpd</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>service httpd start
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ£€æŸ¥å¯åŠ¨æƒ…å†µ
æµè§ˆå™¨ä¸Šä½¿ç”¨http://IP/dse/enterprise/ï¼Œ å¦‚http://192.168.19.32/dse/enterprise/éªŒè¯</p>

<h1 id="28-httpdè®¾ç½®å¼€æœºå¯åŠ¨">28. httpdè®¾ç½®å¼€æœºå¯åŠ¨</h1>

<p>chkconfig httpd on</p>

<h1 id="29-å®‰è£…vpnæœåŠ¡å™¨pptp">29. å®‰è£…VPNæœåŠ¡å™¨PPTP</h1>

<h2 id="291-è½¯ä»¶å®‰è£…">29.1. è½¯ä»¶å®‰è£…</h2>
<p>å®‰è£…ä¾èµ–è½¯ä»¶
yum install -y ppp iptables perl</p>

<p>å®‰è£…pptpdè½¯ä»¶
https://pkgs.org/download/cpioä¸‹è½½åŒ…åœ°å€æœç´¢pptpdï¼Œä¸‹è½½64ä½è½¯ä»¶åŒ…åˆ°/home/hadoop/pptpdç›®å½•ä¸‹pptpd-1.4.0-3.el6.x86_64.rpm
ç„¶åè¿›è¡Œå®‰è£…</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>rpm <span class="nt">-ivh</span> ./<span class="k">*</span>.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="292-é…ç½®æ–‡ä»¶">29.2. é…ç½®æ–‡ä»¶</h2>

<ul>
  <li>é…ç½®pppé€‰é¡¹</li>
</ul>

<p>$ mv /etc/ppp/options.pptpd /etc/ppp/options.pptpd.bak
$ vi /etc/ppp/options.pptpd</p>

<p>è¾“å…¥ä¸‹é¢å†…å®¹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>name pptpd
refuse-pap
refuse-chap
refuse-mschap
require-mschap-v2
require-mppe-128
proxyarp
lock
nobsdcomp
novj
novjccomp
nologfd
idle 2592000
ms-dns 8.8.8.8
ms-dns 8.8.4.4
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>é…ç½®å®¢æˆ·ç«¯è¿æ¥ç”¨æˆ·ä¿¡æ¯</li>
</ul>

<p>mv /etc/ppp/chap-secrets /etc/ppp/chap-secrets.bak
vi /etc/ppp/chap-secrets</p>

<p>è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>#client server secret IP addresses
liulv  pptpd  password *
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>é…ç½®pptpdä¿¡æ¯</li>
</ul>

<p>$ mv /etc/pptpd.conf /etc/pptpd.conf.bak
$ vi /etc/pptpd.conf</p>

<p>è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>option /etc/ppp/options.pptpd
logwtmp
localip 192.168.19.1
remoteip 192.168.19.11-30
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>é…ç½®å¯åŠ¨è·¯ç”±è½¬æ¢</li>
</ul>

<p>$ vi /etc/sysctl.conf
ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>net.ipv4.ip_forward = 1
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="293-å¯åŠ¨pptp-vpnæœåŠ¡ç«¯">29.3. å¯åŠ¨pptp vpnæœåŠ¡ç«¯</h2>

<p>$ service pptpd start</p>

<h2 id="294-å…³é—­é˜²ç«å¢™">29.4. å…³é—­é˜²ç«å¢™</h2>

<p>iptables -F
chkconfig iptables off</p>

<h2 id="295-è®¾ç½®pptp-vpnå¼€æœºå¯åŠ¨">29.5. è®¾ç½®pptp vpnå¼€æœºå¯åŠ¨</h2>

<p>$ chkconfig pptpd on</p>

<h2 id="296-æ—¥å¿—ä¿¡æ¯">29.6. æ—¥å¿—ä¿¡æ¯</h2>

<p>$ cat /var/log/messages</p>

<h2 id="297-å®¢æˆ·ç«¯è¿æ¥">29.7. å®¢æˆ·ç«¯è¿æ¥</h2>

<p>å¯ä»¥æŸ¥çœ‹ä¸‹é¢â€œå®‰è£…VPNå®¢æˆ·ç«¯pptp-setupâ€ä¿¡æ¯</p>

<h1 id="30-å®‰è£…vpnå®¢æˆ·ç«¯pptp-setupå¯é€‰">30. å®‰è£…VPNå®¢æˆ·ç«¯pptp-setupï¼ˆå¯é€‰ï¼‰</h1>

<p>å¤–ç½‘ä¸‹è½½åŒ…ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>$ yum install --downloadonly --downloaddir=/home/hadoop/pptp-setup pptp-setup
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ‹·è´åˆ°å†…ç½‘ï¼Œå®‰è£…</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> /home/hadoop/pptp-setup
<span class="nv">$ </span>rpm <span class="nt">-ivh</span> ./<span class="k">*</span>.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿æ¥vpn</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>pptpsetup <span class="nt">--create</span> vpn <span class="nt">--server</span> 192.168.19.1 <span class="nt">--username</span> liulv <span class="nt">--password</span> 123456 <span class="nt">--encrypt</span> <span class="nt">--start</span> 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å‡ºç°ä¸‹é¢è¯æ˜è¿æ¥æˆåŠŸï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>Using interface ppp0
Connect: ppp0 &lt;<span class="nt">--</span><span class="o">&gt;</span> /dev/pts/2
CHAP authentication succeeded
MPPE 128-bit stateless compression enabled
<span class="nb">local  </span>IP address 192.168.1.182
remote IP address 192.168.1.180
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä½†æ˜¯æ­¤æ—¶å‘ç°ï¼Œå³ä½¿è¿ä¸Šäº†vpnï¼Œè¿˜æ˜¯ä¸èƒ½ä¸Šå¤–ç½‘ã€‚è¿™æ˜¯å› ä¸ºè·¯ç”±çš„é—®é¢˜ï¼ŒæŸ¥çœ‹è·¯ç”±
$ route -n</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.1.180   0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
192.168.19.1    0.0.0.0         255.255.255.255 UH    0      0        0 eth0
192.168.19.0    0.0.0.0         255.255.255.0   U     1      0        0 eth0
</pre></td></tr></tbody></table></code></pre></div></div>

<p>éœ€è¦å°†ppp0çš„è·¯ç”±è®¾ä¸ºï¼šå°†æ‰€æœ‰å¯¹å¤–ç½‘ç»œéƒ½é€šè¿‡ppp0è·¯ç”±ã€‚
$ route add -net 0.0.0.0 dev ppp0</p>

<p>æŸ¥çœ‹è·¯ç”±
$ route -n</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.1.180   0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
192.168.19.1    0.0.0.0         255.255.255.255 UH    0      0        0 eth0
192.168.19.0    0.0.0.0         255.255.255.0   U     1      0        0 eth0
0.0.0.0         0.0.0.0         0.0.0.0         U     0      0        0 ppp0
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="31-ä¼˜åŒ–è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡">31. ä¼˜åŒ–è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡</h1>

<h2 id="311-æ£€æŸ¥è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡">31.1. æ£€æŸ¥è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">cat</span> /proc/sys/vm/swappiness
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ˜¾ç¤ºå¦‚ä¸‹ï¼š
30</p>

<h2 id="312-ä¸´æ—¶é™ä½è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡">31.2. ä¸´æ—¶é™ä½è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sysctl vm.swappiness<span class="o">=</span>0
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="313-æ°¸ä¹…é™ä½è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡">31.3. æ°¸ä¹…é™ä½è™šæ‹Ÿå†…å­˜éœ€æ±‚ç‡</h2>

<p>RedHat 6</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s1">'vm.swappiness = 0'</span> <span class="o">&gt;</span> /etc/sysctl.d/swappiness.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¹¶è¿è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿ç”Ÿæ•ˆ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sysctl <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>RedHat 7</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>sysctl <span class="nt">-w</span> vm.swappiness<span class="o">=</span>0
<span class="nb">echo </span>vm.swappiness <span class="o">=</span> 0 <span class="o">&gt;&gt;</span> /etc/sysctl.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="32-å…³é—­é€æ˜å¤§é¡µé¢">32. å…³é—­é€æ˜å¤§é¡µé¢</h1>

<h2 id="321-æ£€æŸ¥é€æ˜å¤§é¡µé¢">32.1. æ£€æŸ¥é€æ˜å¤§é¡µé¢</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">cat</span> /sys/kernel/mm/transparent_hugepage/defrag
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦‚æœæ˜¾ç¤ºä¸ºï¼ˆæœªå…³é—­ï¼‰ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>[always] madvise never
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="322-ä¸´æ—¶å…³é—­é€æ˜å¤§é¡µé¢">32.2. ä¸´æ—¶å…³é—­é€æ˜å¤§é¡µé¢</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">echo </span>never <span class="o">&gt;</span> /sys/kernel/mm/transparent_hugepage/defrag
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç¡®è®¤é…ç½®ç”Ÿæ•ˆï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">cat</span> /sys/kernel/mm/transparent_hugepage/defrag
<span class="sb">```</span>s
æ˜¾ç¤ºä¸ºä¸‹é¢å†…å®¹åˆ™å…³é—­æˆåŠŸ
</pre></td></tr></tbody></table></code></pre></div></div>

<p>always madvise [never]</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
## 32.3. æ°¸ä¹…å…³é—­é€æ˜å¤§é¡µé¢

å¼€æœºè‡ªåŠ¨å…³é—­
```shell
echo 'echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag' &gt;&gt; /etc/rc.local
chmod +x /etc/rc.d/rc.local
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="33-å®‰è£…jdk">33. å®‰è£…JDK</h1>

<h2 id="331-æ£€æŸ¥javaæ˜¯å¦å®‰è£…">33.1. æ£€æŸ¥Javaæ˜¯å¦å®‰è£…</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>rpm <span class="nt">-qa</span> | <span class="nb">grep </span>java
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ ¹æ®æŸ¥è¯¢ç»“æœæŸ¥çœ‹ï¼Œå¦‚æœæœ‰æ¯”å¦‚java-1.8.0-openjdk-headless-1.8.0.65-3.b17.el7.x86_64ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>yum <span class="nt">-y</span> remove java-1.8.0-openjdk-headless-1.8.0.65-3.b17.el7.x86_64
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦‚æœéœ€è¦å¸è½½å…¨éƒ¨çš„openjdk, è¿è¡Œä¸‹é¢å‘½ä»¤</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>yum <span class="nt">-y</span> remove java<span class="k">*</span>openjdk<span class="k">*</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="332-å®‰è£…jdk---æºç å‹ç¼©åŒ…æ–¹å¼å®‰è£…ä¸æ¨èå¦‚æœä½¿ç”¨æ­¤æ–¹å¼22-æ­¥éª¤å¿½ç•¥">33.2. å®‰è£…JDK - æºç å‹ç¼©åŒ…æ–¹å¼å®‰è£…(ä¸æ¨èï¼Œå¦‚æœä½¿ç”¨æ­¤æ–¹å¼2.2 æ­¥éª¤å¿½ç•¥)</h2>

<h3 id="3321-ä¸‹è½½å®‰è£…å‹ç¼©åŒ…">33.2.1. ä¸‹è½½å®‰è£…å‹ç¼©åŒ…</h3>

<p>ç›´æ¥å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„JDK</p>

<p>ä½¿ç”¨wgetæ–¹å¼ä¸‹è½½ï¼Œä¸æ¨èï¼Œå› ä¸ºä¸‹è½½ä¸ä¸€å®šæˆåŠŸå‹ç¼©åŒ…ä¼šå‡ºç°å¼‚å¸¸</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> /usr/java
<span class="nb">cd</span> /usr/java
wget http://download.oracle.com/otn-pub/java/jdk/8u151-b12/e758a0de34e24606bca991d704f6dcbf/jdk-8u151-linux-x64.tar.gz
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="3322-è§£å‹ç¼©åŒ…">33.2.2. è§£å‹ç¼©åŒ…</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> /usr/java
<span class="nb">cd</span> /usr/java
<span class="nb">tar</span> <span class="nt">-xzvf</span> jdk-8u151-linux-x64.tar.gz
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="333-rpmæ–¹å¼å®‰è£…æ¨èå®‰è£…æ–¹å¼å¦‚æœä½¿ç”¨æ­¤æ–¹å¼21æ­¥éª¤å¿½ç•¥">33.3. Rpmæ–¹å¼å®‰è£…ï¼ˆæ¨èå®‰è£…æ–¹å¼ï¼Œå¦‚æœä½¿ç”¨æ­¤æ–¹å¼2.1æ­¥éª¤å¿½ç•¥ï¼‰</h2>
<p>æ­¥éª¤å¦‚ä¸‹</p>

<p>ä¸‹è½½éœ€è¦ç‰ˆæœ¬çš„rpmåŒ…å¦‚jdk-8u171-linux-x64.rpmåˆ°/usr/java</p>

<p>Rpmå®‰è£…</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /usr/java
rpm <span class="nt">-ivh</span> jdk-8u171-linux-x64.rpm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>rpmå®‰è£…å®Œæˆååˆ é™¤rpmåŒ…</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">rm</span> <span class="nt">-r</span> /tmp/jdk/jdk-8u171-linux-x64.rpm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>åˆ‡æ¢Javaç‰ˆæœ¬</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">sudo mv</span> /usr/java/jdk1.8.0_171-amd64 /usr/java/jdk1.8.0_171
<span class="nb">sudo </span>alternatives <span class="nt">--install</span> /usr/bin/java java /usr/java/jdk1.8.0_171/bin/java 1
<span class="nb">sudo </span>update-alternatives <span class="nt">--set</span> java /usr/java/laster/jre/bin/java
</pre></td></tr></tbody></table></code></pre></div></div>

<p>é…ç½®jdkå˜é‡ç¯å¢ƒ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">sudo echo</span> <span class="s1">'export JAVA_HOME=/usr/java/jdk1.8.0_101'</span> <span class="o">&gt;&gt;</span> /etc/profile
<span class="nb">sudo echo</span> <span class="s1">'export JRE_HOME=${JAVA_HOME}/jre'</span> <span class="o">&gt;&gt;</span> /etc/profile
<span class="nb">sudo echo</span> <span class="s1">'export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib'</span> <span class="o">&gt;&gt;</span> /etc/profile
<span class="nb">sudo echo</span> <span class="s1">'export PATH=${JAVA_HOME}/bin:$PATH'</span> <span class="o">&gt;&gt;</span> /etc/profile
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¯¼å…¥javaç¯å¢ƒå˜é‡</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /etc/profile
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æµ‹è¯•jdkçš„é…ç½®</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>sudo java -version
sudo /usr/bin/java -version
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç»“æœï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>[root@Master java]# java -version
java version "1.8.0_112"
Java(TM) SE Runtime Environment (build 1.8.0_112-b15)
Java HotSpot(TM) 64-Bit Server VM (build 25.112-b15, mixed mode)
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="34-å®‰è£…mysqlrhel-7">34. å®‰è£…Mysql(Rhel-7)</h1>

<p>å‚è€ƒåœ°å€el6ï¼šhttp://www.cnblogs.com/dianqijiaodengdai/p/7731562.html</p>

<p>å‚è€ƒåœ°å€el7: https://blog.csdn.net/xyang81/article/details/51759200</p>

<p>mysqlæˆæƒè¿œç¨‹ç”¨æˆ·</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">grant</span> <span class="k">all</span> <span class="k">privileges</span> <span class="k">on</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="n">root</span><span class="o">@</span><span class="nv">"192.168.19.1"</span> <span class="n">identified</span> <span class="k">by</span> <span class="nv">"@Wtt102501@"</span> <span class="k">with</span> <span class="k">grant</span> <span class="k">option</span><span class="p">;</span>
<span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">grant</span> <span class="k">all</span> <span class="k">privileges</span> <span class="k">on</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="n">root</span><span class="o">@</span><span class="nv">"192.168.19.1"</span> <span class="n">identified</span> <span class="k">by</span> <span class="nv">"123456"</span> <span class="k">with</span> <span class="k">grant</span> <span class="k">option</span><span class="p">;</span>
<span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">grant</span> <span class="k">all</span> <span class="k">privileges</span> <span class="k">on</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="n">root</span><span class="o">@</span><span class="nv">"hadoop02"</span> <span class="n">identified</span> <span class="k">by</span> <span class="nv">"123456"</span> <span class="k">with</span> <span class="k">grant</span> <span class="k">option</span><span class="p">;</span>
<span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æŸ¥è¯¢ç”¨æˆ·è¿œç¨‹æƒé™</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">select</span> <span class="k">user</span><span class="p">,</span><span class="k">host</span> <span class="k">from</span> <span class="k">user</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="35-hadoop274-å®‰è£…">35. HADOOP2.7.4 å®‰è£…</h1>

<h2 id="351-æ·»åŠ hadoopç¯å¢ƒå˜é‡">35.1. æ·»åŠ Hadoopç¯å¢ƒå˜é‡</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s1">'export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.4'</span>  <span class="o">&gt;&gt;</span> /etc/profile
<span class="nb">echo</span> <span class="s1">'export PATH=$HADOOP_HOME/sbin:$HADOOP_HOME/bin:$PATH'</span> <span class="o">&gt;&gt;</span> /etc/profile
<span class="nb">source</span> /etc/profile
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="352-åˆ›å»ºæ•°æ®å’Œæ—¥å¿—ç›®å½•">35.2. åˆ›å»ºæ•°æ®å’Œæ—¥å¿—ç›®å½•</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/dfs
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/dfs/data
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/dfs/checkpoint
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/dfs/name
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/yarn
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/yarn/nodemanager
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/tmp
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/hadoop/logs
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="353-namenode-format">35.3. namenode format</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /usr/local/hadoop/hadoop-2.7.4/bin
hadoop namenode <span class="nt">-format</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="36-sparkå®‰è£…">36. Sparkå®‰è£…</h1>

<h2 id="361-é…ç½®ç¯å¢ƒå˜é‡">36.1. é…ç½®ç¯å¢ƒå˜é‡</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>echo 'export SPARK_HOME=/usr/local/spark/spark-2.2.0' &gt;&gt; /etc/profile
echo 'export PATH=$SPARK_HOME/bin:$SPARK_HOME/sbin:$PATH'  &gt;&gt; /etc/profile
echo 'export PATH=$SPARK_HOME/sbin:$PATH'  &gt;&gt; /etc/profile
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="362-åŒæ­¥æ–‡ä»¶çš„é…ç½®">36.2. åŒæ­¥æ–‡ä»¶çš„é…ç½®</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>rsync <span class="nt">-av</span> /usr/local/spark/spark-2.2.0/conf Master1:/usr/local/spark/spark-2.2.0/conf
/usr/local/scala/scala-2.11.11
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="363-scalaç¯å¢ƒå˜é‡">36.3. Scalaç¯å¢ƒå˜é‡</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s1">'export SCALA_HOME=/usr/local/scala/scala-2.11.11'</span>  <span class="o">&gt;&gt;</span> /etc/profile
<span class="nb">echo</span> <span class="s1">'export PATH=$SCALA_HOME/bin:$PATH'</span>  <span class="o">&gt;&gt;</span> /etc/profile
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="364-ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ">36.4. ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /etc/profile
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="365-sparkè¿è¡Œæµ‹è¯•">36.5. Sparkè¿è¡Œæµ‹è¯•</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /usr/local/spark/spark-2.2.0/examples/jars
spark-submit <span class="se">\</span>
<span class="nt">--class</span> org.apache.spark.examples.SparkPi <span class="se">\</span>
<span class="nt">--master</span> spark://Master:7077 <span class="se">\</span>
<span class="nt">--executor-memory</span> 1G <span class="se">\</span>
<span class="nt">--total-executor-cores</span> 4 <span class="se">\</span>
/usr/local/spark/spark-2.2.0/examples/jars/spark-examples_2.11-2.2.0.jar 100
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="366-spark-yarnæ£€æŸ¥">36.6. Spark yarnæ£€æŸ¥</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>http://spark.apache.org/docs/latest/running-on-yarn.html
--master yarn
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="37-æ‰©å±•ç£ç›˜---åŸºäºæºç£ç›˜devsda">37. æ‰©å±•ç£ç›˜ - åŸºäºæºç£ç›˜/dev/sda</h1>

<h2 id="371-å…³æœºåvmwareè®¾ç½®è™šæ‹Ÿæœºç„¶åç‚¹å‡»ç£ç›˜ä»¥å‰100g-æ‰©å±•ä¸º200g">37.1. å…³æœºåVMwareè®¾ç½®è™šæ‹Ÿæœºç„¶åç‚¹å‡»ç£ç›˜ä»¥å‰100G, æ‰©å±•ä¸º200G</h2>

<h2 id="372-å¼€æœºåæŸ¥çœ‹ç£ç›˜">37.2. å¼€æœºåæŸ¥çœ‹ç£ç›˜</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>ll /dev/sd<span class="k">*</span>
fdisk <span class="nt">-l</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="38-åˆ›å»ºåˆ†åŒº-sdaå·²ç»æœ‰sda2äº†é‚£ä¹ˆåˆ›å»ºä¸º3">38. åˆ›å»ºåˆ†åŒº sdaå·²ç»æœ‰sda2äº†ï¼Œé‚£ä¹ˆåˆ›å»ºä¸º3</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>fdisk /dev/sda
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>è¾“å…¥ p æ‰“å°ç°æœ‰åˆ†åŒºæƒ…å†µï¼ˆè¿˜æ²¡æœ‰åˆ†åŒºï¼‰
è¾“å…¥ n æ–°å»ºåˆ†åŒº
è¾“å…¥ p ä¸ºå»ºç«‹ä¸»åˆ†åŒºï¼ˆæ­¤æ—¶çš„pæ˜¯åœ¨nåçš„ï¼Œä¸æ˜¯æ‰“å°ï¼‰
è¾“å…¥ 3 ä¸ºå»ºç«‹ç¬¬ä¸‰ä¸ªä¸»åˆ†åŒºï¼Œå‰é¢å·²ç»å»ºç«‹äº†2ä¸ªåˆ†åŒºäº†
åˆ†åŒºèµ·å§‹ä½ç½®å¯ä»¥ç›´æ¥å›è½¦ï¼Œé»˜è®¤æ˜¯1
é»˜è®¤å›è½¦åˆ™ä¸ºå…¨éƒ¨ï¼Œï¼ˆåˆ†åŒºæœ€åä½ç½®ä¸º 650ï¼ˆå› ä¸ºæ¯ä¸ªæŸ±é¢çº¦8Mï¼Œ650æŸ±é¢çº¦æ˜¯5Gï¼Œæœ¬å®éªŒåªç”¨5Gï¼Œå‰©ä½™çš„åšå¢åŠ LVå®éªŒç”¨ï¼‰ï¼‰
è¾“å…¥ p æ‰“å°åˆ†åŒºæƒ…å†µï¼Œå‘ç°å·²å»ºç«‹ä¸€ä¸ªåˆ†åŒº /dev/sda3ï¼Œä½†æ˜¯ æ­¤åˆ†åŒºä¸º Linux æ ¼å¼

æ”¹å˜ç³»ç»Ÿæ ‡è¯†ç¬¦
è¾“å…¥ t æ”¹å˜åˆ†åŒº3çš„å±æ€§
è¾“å…¥ L æŸ¥çœ‹æœ‰ä¸ªå±æ€§å¯¹åº”çš„å‘½ä»¤
è¾“å…¥ 8e æ”¹å˜åˆ†åŒº1ä¸º Linux LVMæ ¼å¼
è¾“å…¥ p æ‰“å°åˆ†åŒºæƒ…å†µï¼Œå‘ç°å»ºç«‹çš„åˆ†åŒº /dev/sdb1 ä¸º Linux LVM æ ¼å¼
è¾“å…¥ w ä¿å­˜åˆ›å»ºçš„åˆ†åŒº
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="381-æŸ¥çœ‹ç£ç›˜åˆ†åŒºæ˜¯å¦åˆ›å»ºæˆåŠŸ">38.1. æŸ¥çœ‹ç£ç›˜åˆ†åŒºæ˜¯å¦åˆ›å»ºæˆåŠŸ</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>fdisk <span class="nt">-l</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="382-é‡å¯ä¸éœ€è¦reboot">38.2. é‡å¯ä¸éœ€è¦reboot</h2>

<p>ä½¿kernelé‡æ–°è¯»å–åˆ†åŒºè¡¨å³å¯</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>partprobe
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="383-åˆ†åŒºå-åˆ›å»ºç‰©ç†å·åˆ›å»ºå·ç»„åˆ›å»ºé€»è¾‘å·é€»è¾‘å·æŒ‚ç›˜">38.3. åˆ†åŒºå åˆ›å»ºç‰©ç†å·ï¼Œåˆ›å»ºå·ç»„ï¼Œåˆ›å»ºé€»è¾‘å·ï¼Œé€»è¾‘å·æŒ‚ç›˜</h2>

<p>ç‰¹åˆ«æ³¨æ„ï¼šRhel7å·²ç»æœ‰å·ç»„äº†å’Œé€»è¾‘å·ç­‰å…¨éƒ¨éƒ½æœ‰åªæ˜¯æ‰©å±•ï¼Œè¿™é‡Œå°±ä¸åˆ›å»ºäº†</p>

<h3 id="3831-åˆ›å»ºç‰©ç†å·">38.3.1. åˆ›å»ºç‰©ç†å·</h3>

<p>æ‰«é¢ç³»ç»ŸPVï¼špvscan
åˆ›å»ºç‰©ç†å·PV
pvcreate /dev/sdb3
æŸ¥çœ‹æ–°æ·»åŠ çš„ç‰©ç†å·PV
pvdisplay</p>

<h3 id="3832-åˆ›å»ºç‰©ç†å·ç»„">38.3.2. åˆ›å»ºç‰©ç†å·ç»„</h3>

<p>vgscan
vgcreate vg_test /dev/sda3
vgdisplay</p>

<h3 id="3833-åˆ›å»ºé€»è¾‘å·">38.3.3. åˆ›å»ºé€»è¾‘å·</h3>

<p>æ‰«é¢ç³»ç»ŸLVï¼šlvscan
åˆ›å»ºLVï¼šlvcreate -l 1274 -n lv_test vg_testï¼ˆ1274æ˜¯VGä¸­PEçš„ä¸ªæ•°ï¼‰</p>

<p>åˆ›å»ºé€»è¾‘å·æ ¹æ®ç‰©ç†å·100ç£ç›˜ç©ºé—´åˆ›å»º
lvcreate -l 100%VG -n lv_data vg_data</p>

<p>ç¤ºä¾‹ï¼š
ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„lvï¼Œå¹¶æŒ‡å®šåå­—ä¸ºlv_2
lvcreate -L 2G -n lv_2 vg_1
ï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªå å…¨éƒ¨å·ç»„å¤§å°çš„lvï¼Œå¹¶æŒ‡å®šåå­—ä¸ºlv_3ï¼ˆæ³¨æ„å‰ææ˜¯vgå¹¶æ²¡æœ‰åˆ›å»ºæœ‰lvï¼‰
lvcreate -l 100%VG -n lv_3 vg_1
ï¼ˆ3ï¼‰åˆ›å»ºä¸€ä¸ªç©ºé—²ç©ºé—´80%å¤§å°çš„lvï¼Œå¹¶æŒ‡å®šåå­—ä¸ºlv_4(å¸¸ç”¨)
lvcreate -l 80%Free -n lv_4 vg_1</p>

<p>æŸ¥çœ‹LVï¼šlvdisplay
æ ¼å¼åŒ–åˆšåˆšåˆ›å»ºçš„LV:
mkfs -t ext4 /dev/vg_test/lv_test</p>

<p>mkfs -t ext4 /dev/vg_data/lv_data</p>

<h3 id="3834-åˆ›å»ºç›®å½•å¹¶æŒ‚è½½">38.3.4. åˆ›å»ºç›®å½•å¹¶æŒ‚è½½</h3>

<p>åˆ›å»ºç›®å½•ï¼šmkdir /test
æŒ‚è½½é€»è¾‘å·åˆ°ç›®å½•ï¼šmount /dev/vg_test/lv_test /test
mount /dev/vg_data/lv_data /data
æŸ¥çœ‹ï¼šdf -h</p>

<p>è®¾ç½®å¼€æœºæŒ‚è½½ï¼š
/dev/mapper/vg_test-lv_test /test     ext4    defaults        1 2
 å†™å…¥ /etc/fstab</p>

<p>tbdsåˆ™éœ€è¦ä¿®æ”¹ä¸º
/dev/mapper/vg_data-lv_data /data ext4 defaults, noatime 0 0</p>

<p>å¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨ä¿®æ”¹çš„é…ç½®è€Œæ— éœ€é‡å¯ç³»ç»Ÿ:
mount -o remount /data</p>

<h3 id="3835-å¯¹åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–">38.3.5. å¯¹åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–</h3>

<p>mkfs.ext4 /dev/sda3</p>

<h3 id="3836-å°†ç‰©ç†å·åŠ å…¥åˆ°å·ç»„">38.3.6. å°†ç‰©ç†å·åŠ å…¥åˆ°å·ç»„</h3>

<p>æŸ¥çœ‹å·ç»„ä¿¡æ¯
vgdisplay
è¿”å›ç»“æœ
VG Name               rhel</p>

<h3 id="3837-æ·»åŠ ç‰©ç†å·devsda3åˆ°å·ç»„rhel">38.3.7. æ·»åŠ ç‰©ç†å·ã€/dev/sda3ã€‘åˆ°å·ç»„ã€rhelã€‘</h3>

<p>vgextend rhel /dev/sda3</p>

<h3 id="3838-æ·»åŠ æˆåŠŸé€šè¿‡ä¸‹é¢å‘½ä»¤ç¡®è®¤sdb1æ‰€å±çš„å·ç»„">38.3.8. æ·»åŠ æˆåŠŸï¼Œé€šè¿‡ä¸‹é¢å‘½ä»¤ç¡®è®¤sdb1æ‰€å±çš„å·ç»„ã€‚</h3>

<p>pvdisplay</p>

<h2 id="384-å¯é€‰-å–æ¶ˆæŒ‚è½½">38.4. å¯é€‰, å–æ¶ˆæŒ‚è½½:</h2>

<p>å–æ¶ˆæŒ‚è½½
umount /data
å–æ¶ˆé€»è¾‘å·
lvremove /dev/vg_data/lv_data
å–æ¶ˆå·ç»„
vgremove vg_data
å–æ¶ˆç‰©ç†å·
pvremove /dev/sdb3
å–æ¶ˆ/etc/fstabé…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„æŒ‚è½½ä¿¡æ¯</p>

<h3 id="3841-æ‰©å……é€»è¾‘å·çš„å®¹é‡">38.4.1. æ‰©å……é€»è¾‘å·çš„å®¹é‡</h3>

<p>å…ˆé€šè¿‡ä¸‹é¢å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿé‡Œæœ‰å“ªäº›é€»è¾‘å·ã€‚
lvdisplay
df -h
é€»è¾‘å·ã€/dev/rhel/rootã€‘æŒ‚åœ¨äºæ ¹ç›®å½•ä¸Šï¼Œè¿™ä¸ªé€»è¾‘å·å°±æ˜¯æœ¬æ¬¡è¦æ‰©å……çš„å¯¹è±¡
å¯ä»¥çœ‹åˆ°é€»è¾‘å·ã€/dev/rhel/rootã€‘å’Œæ–‡ä»¶ç³»ç»Ÿã€/dev/mapper/rhel-rootã€‘çš„è·¯å¾„æœ‰æ‰€ä¸åŒï¼Œä½†ä»–ä»¬éƒ½å¯¹åº”ç›¸åŒçš„è®¾å¤‡ã€‚</p>

<h3 id="3842-é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ‰©å……devrhelrootçš„å®¹é‡">38.4.2. é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼Œæ‰©å……ã€/dev/rhel/rootã€‘çš„å®¹é‡ã€‚</h3>

<p>lvextend -L +40G /dev/rhel/root</p>

<h3 id="3843-ç°åœ¨é€»è¾‘å·çš„å®¹é‡æ‰©å……äº†ä½†æ˜¯å®ƒå¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿçš„å®¹é‡è¿˜æ˜¯åŸæ¥çš„å¤§å°">38.4.3. ç°åœ¨é€»è¾‘å·çš„å®¹é‡æ‰©å……äº†ï¼Œä½†æ˜¯å®ƒå¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿçš„å®¹é‡è¿˜æ˜¯åŸæ¥çš„å¤§å°ã€‚</h3>

<p>df -h</p>

<h3 id="3844-éœ€è¦é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ‰©å……æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°">38.4.4. éœ€è¦é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼Œæ‰©å……æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ã€‚</h3>

<p>xfs_growfs /dev/rhel/root</p>

<h3 id="3845-æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿæ˜¾ç¤ºçš„ç©ºé—´å¢å¤§äº†">38.4.5. æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¾ç¤ºçš„ç©ºé—´å¢å¤§äº†ã€‚</h3>

<p>df -h</p>

<h1 id="39-dnsmasqæ­å»ºæœ¬åœ°dnsæœåŠ¡å™¨ä¸Šç½‘">39. Dnsmasqæ­å»ºæœ¬åœ°dnsæœåŠ¡å™¨ä¸Šç½‘</h1>

<h2 id="391-å®‰è£…å¹¶å¯åŠ¨dnsmasq">39.1. ã€å®‰è£…å¹¶å¯åŠ¨Dnsmasq</h2>

<p>yum remove dnsmasq
yum install -y dnsmasq
service dnsmasq start (rhle7 å‘½ä»¤ä¸ºï¼š/bin/systemctl start  dnsmasq.service)</p>

<h2 id="392-dnsmasqé…ç½®">39.2. ã€Dnsmasqé…ç½®</h2>

<p>2.1 æŸ¥çœ‹dnsmasqçš„ã€é…ç½®è·¯å¾„ã€‘
ll -d /etc/dnsmasq.conf</p>

<h3 id="3921-ç¼–è¾‘vim-etcdnsmasqconf-conf-diretcdnsmasqd">39.2.1. ç¼–è¾‘vim /etc/dnsmasq.conf ï¼ˆconf-dir=/etc/dnsmasq.dï¼‰</h3>

<p>ã€rhel 6ã€‘æ–¹å¼</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>resolv-file=/etc/resolv.dnsmasq.conf
strict-order
addn-hosts=/etc/dnsmasq.hosts
listen-address=127.0.0.1,192.168.1.244
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ã€rhel 7ã€‘æ–¹å¼
vim /etc/dnsmasq.conf</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>listen-address=192.168.1.244,127.0.0.1
cache-size=10000
conf-dir=/etc/dnsmasq.d,.rpmnew,.rpmsave,.rpmorig
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¤‡æ³¨ï¼šresolv-file â€”- /dnsmasq ä¼šä»è¿™ä¸ªæ–‡ä»¶ä¸­å¯»æ‰¾ä¸Šæ¸¸dnsæœåŠ¡å™¨
strict-order  â€” //å»æ‰å‰é¢çš„#
addn-hosts â€” //åœ¨è¿™ä¸ªç›®é‡Œé¢æ·»åŠ è®°å½•
listen-address â€”//ç›‘å¬åœ°å€</p>

<h3 id="3922-åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹">39.2.2. åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>rsync <span class="nt">-av</span> /etc/dnsmasq.conf hadoop02:/etc/
rsync <span class="nt">-av</span> /etc/dnsmasq.conf hadoop03:/etc/
rsync <span class="nt">-av</span> /etc/dnsmasq.conf hadoop04:/etc/
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="3923-ä¿®æ”¹etcresolvconf">39.2.3. ä¿®æ”¹/etc/resolv.conf</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s1">'nameserver 127.0.0.1'</span> <span class="o">&gt;</span> /etc/resolv.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="3924-åˆ›å»ºresolvdnsmasqconfæ–‡ä»¶å¹¶æ·»åŠ ä¸Šæ¸¸dnsæœåŠ¡å™¨çš„åœ°å€">39.2.4. åˆ›å»ºresolv.dnsmasq.confæ–‡ä»¶å¹¶æ·»åŠ ä¸Šæ¸¸dnsæœåŠ¡å™¨çš„åœ°å€</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">touch</span> /etc/resolv.dnsmasq.conf
<span class="nb">echo</span> <span class="s1">'nameserver 119.29.29.29'</span> <span class="o">&gt;</span> /etc/resolv.dnsmasq.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æç¤ºï¼šresolv.dnsmasq.confä¸­è®¾ç½®çš„æ˜¯çœŸæ­£çš„Nameserverï¼Œå¯ä»¥ç”¨ç”µä¿¡ã€è”é€šç­‰å…¬å…±çš„DNS</p>

<h3 id="3925-åˆ›å»ºdnsmasqhostsæ–‡ä»¶">39.2.5. åˆ›å»ºdnsmasq.hostsæ–‡ä»¶</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cp</span> /etc/hosts /etc/dnsmasq.hosts
<span class="nb">echo</span> <span class="s1">'addn-hosts=/etc/dnsmasq.hosts'</span> <span class="o">&gt;&gt;</span> /etc/dnsmasq.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>Dnsmasqå¯åŠ¨</li>
</ol>

<p>3.1 è®¾ç½®Dnsmasqå¼€æœºå¯åŠ¨å¹¶å¯åŠ¨DnsmasqæœåŠ¡
å¼€æœºå¯åŠ¨</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>chkconfig dnsmasq on <span class="o">(</span>rhle7 å‘½ä»¤ï¼šsystemctl <span class="nb">enable </span>dnsmasq<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¯åŠ¨DnsmasqæœåŠ¡</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>/etc/init.d/dnsmasq restart ï¼ˆ<span class="o">(</span>rhle7 å‘½ä»¤ä¸ºï¼šsystemctl restart  dnsmasq.service<span class="o">)</span>ï¼‰
</pre></td></tr></tbody></table></code></pre></div></div>

<p>3.2 æŸ¥çœ‹Dnsmasqæ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>netstat <span class="nt">-tunlp</span>|grep 53
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿”å›ä¸‹é¢ä¿¡æ¯ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>tcp        0      0 0.0.0.0:53                  0.0.0.0:<span class="k">*</span>                   LISTEN      2491/dnsmasq        
tcp        0      0 :::53                       :::<span class="k">*</span>                        LISTEN      2491/dnsmasq        
udp        0      0 0.0.0.0:53                  0.0.0.0:<span class="k">*</span>                               2491/dnsmasq        
udp        0      0 :::53                       :::<span class="k">*</span>                                    2491/dnsmasq
</pre></td></tr></tbody></table></code></pre></div></div>

<p>3.3 æµ‹è¯•
dig www.freehao123.com
ç¬¬ä¸€æ¬¡æ˜¯æ²¡æœ‰ç¼“å­˜ï¼Œæ‰€ä»¥æ—¶é—´æ˜¯200å¤š
ç¬¬äºŒæ¬¡å†æ¬¡æµ‹è¯•ï¼Œå› ä¸ºå·²ç»æœ‰äº†ç¼“å­˜ï¼Œæ‰€ä»¥æŸ¥è¯¢æ—¶é—´å·²ç»å˜æˆäº†0.</p>

<p>3.4 åŸŸåæ£€æŸ¥</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>nslookup hadoop01.sinobest.com

root@hadoop01 ~]# nslookup hadoop01.sinobest.com
Server:		127.0.0.1
Address:	127.0.0.1#53

Name:	hadoop01.sinobest.com
Address: 192.168.18.201

<span class="o">[</span>root@hadoop01 ~]# 
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="40-linuxç”¨æˆ·-ç›¸å…³å‘½ä»¤">40. linuxç”¨æˆ·-ç›¸å…³å‘½ä»¤</h1>

<h2 id="401-linuxé‡ŒæŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·">40.1. Linuxé‡ŒæŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·</h2>

<p>ã€€ã€€(1)åœ¨ç»ˆç«¯é‡Œ. å…¶å®åªéœ€è¦æŸ¥çœ‹ /etc/passwdæ–‡ä»¶å°±è¡Œäº†.
ã€€ã€€(2)çœ‹ç¬¬ä¸‰ä¸ªå‚æ•°:500ä»¥ä¸Šçš„, å°±æ˜¯åé¢å»ºçš„ç”¨æˆ·äº†. å…¶å®ƒåˆ™ä¸ºç³»ç»Ÿçš„ç”¨æˆ·.
æˆ–è€…ç”¨cat /etc/passwd |cut -f 1 -d :</p>

<h2 id="402-ç”¨æˆ·ç®¡ç†å‘½ä»¤">40.2. ç”¨æˆ·ç®¡ç†å‘½ä»¤</h2>

<p>useradd æ³¨ï¼šæ·»åŠ ç”¨æˆ·
adduser æ³¨ï¼šæ·»åŠ ç”¨æˆ·
passwd æ³¨ï¼šä¸ºç”¨æˆ·è®¾ç½®å¯†ç 
userdel userå æ³¨ï¼šåˆ é™¤ç”¨æˆ·
groupdel userç»„å æ³¨ï¼šåˆ é™¤ç”¨æˆ·ç»„
usermod æ³¨ï¼šä¿®æ”¹ç”¨æˆ·å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡usermod æ¥ä¿®æ”¹ç™»å½•åã€ç”¨æˆ·çš„å®¶ç›®å½•ç­‰ç­‰; 
pwcov æ³¨ï¼šåŒæ­¥ç”¨æˆ·ä»/etc/passwd åˆ°/etc/shadow
pwck æ³¨ï¼špwckæ˜¯æ ¡éªŒç”¨æˆ·é…ç½®æ–‡ä»¶/etc/passwd å’Œ/etc/shadow æ–‡ä»¶å†…å®¹æ˜¯å¦åˆæ³•æˆ–å®Œæ•´; 
pwunconv æ³¨ï¼šæ˜¯pwcov çš„ç«‹é€†å‘æ“ä½œï¼Œæ˜¯ä»/etc/shadowå’Œ /etc/passwd åˆ›å»º/etc/passwd ï¼Œç„¶åä¼šåˆ é™¤ /etc/shadow æ–‡ä»¶; 
finger æ³¨ï¼šæŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯å·¥å…·
id æ³¨ï¼šæŸ¥çœ‹ç”¨æˆ·çš„UIDã€GIDåŠæ‰€å½’å±çš„ç”¨æˆ·ç»„
chfn æ³¨ï¼šæ›´æ”¹ç”¨æˆ·ä¿¡æ¯å·¥å…·
su æ³¨ï¼šç”¨æˆ·åˆ‡æ¢å·¥å…·
sudo æ³¨ï¼šsudo æ˜¯é€šè¿‡å¦ä¸€ä¸ªç”¨æˆ·æ¥æ‰§è¡Œå‘½ä»¤(execute a command as another user)ï¼Œsu æ˜¯ç”¨æ¥åˆ‡æ¢ç”¨æˆ·ï¼Œç„¶åé€šè¿‡åˆ‡æ¢åˆ°çš„ç”¨æˆ·æ¥å®Œæˆç›¸åº”çš„ä»»åŠ¡ï¼Œä½†sudo èƒ½åé¢ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚sudo ä¸éœ€è¦root å¯†ç å°±å¯ä»¥æ‰§è¡Œroot èµ‹ä¸çš„æ‰§è¡Œåªæœ‰rootæ‰èƒ½æ‰§è¡Œç›¸åº”çš„å‘½ä»¤; ä½†å¾—é€šè¿‡visudo æ¥ç¼–è¾‘/etc/sudoersæ¥å®ç°; 
visudo æ³¨ï¼švisodo æ˜¯ç¼–è¾‘ /etc/sudoers çš„å‘½ä»¤; ä¹Ÿå¯ä»¥ä¸ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œç›´æ¥ç”¨vi æ¥ç¼–è¾‘ /etc/sudoers çš„æ•ˆæœæ˜¯ä¸€æ ·çš„; 
sudoedit æ³¨ï¼šå’Œsudo åŠŸèƒ½å·®ä¸å¤š;</p>

<h2 id="403-ç®¡ç†ç”¨æˆ·ç»„groupçš„å·¥å…·æˆ–å‘½ä»¤">40.3. ç®¡ç†ç”¨æˆ·ç»„(group)çš„å·¥å…·æˆ–å‘½ä»¤;</h2>

<p>groupadd æ³¨ï¼šæ·»åŠ ç”¨æˆ·ç»„; 
groupdel æ³¨ï¼šåˆ é™¤ç”¨æˆ·ç»„; 
groupmod æ³¨ï¼šä¿®æ”¹ç”¨æˆ·ç»„ä¿¡æ¯
groups æ³¨ï¼šæ˜¾ç¤ºç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„
grpck
grpconv æ³¨ï¼šé€šè¿‡/etc/groupå’Œ/etc/gshadow çš„æ–‡ä»¶å†…å®¹æ¥åŒæ­¥æˆ–åˆ›å»º/etc/gshadow ï¼Œå¦‚æœ/etc/gshadow ä¸å­˜åœ¨åˆ™åˆ›å»º; 
grpunconv æ³¨ï¼šé€šè¿‡/etc/group å’Œ/etc/gshadow æ–‡ä»¶å†…å®¹æ¥åŒæ­¥æˆ–åˆ›å»º/etc/group ï¼Œç„¶ååˆ é™¤gshadowæ–‡ä»¶</p>

<p>ç»™å·²æœ‰çš„ç”¨æˆ·å¢åŠ å·¥ä½œç»„
usermod -G groupname username  ï¼ˆè¿™ä¸ªä¼šæŠŠç”¨æˆ·ä»å…¶ä»–ç»„ä¸­å»æ‰ï¼‰
ä»ç»„ä¸­åˆ é™¤ç”¨æˆ·
ç¼–è¾‘/etc/group æ‰¾åˆ°GROUP1é‚£ä¸€è¡Œï¼Œåˆ é™¤ A
æˆ–è€…ç”¨å‘½ä»¤
gpasswd -d userA GROUP</p>

<h2 id="404-å¼‚å¸¸é—®é¢˜-useraddhadoop-ç»„å·²ç»å­˜åœ¨---å¦‚æœæ‚¨æƒ³å°†æ­¤ç”¨æˆ·åŠ å…¥åˆ°è¯¥ç»„è¯·ä½¿ç”¨--g-å‚æ•°">40.4. å¼‚å¸¸é—®é¢˜ useraddï¼šhadoop ç»„å·²ç»å­˜åœ¨ - å¦‚æœæ‚¨æƒ³å°†æ­¤ç”¨æˆ·åŠ å…¥åˆ°è¯¥ç»„ï¼Œè¯·ä½¿ç”¨ -g å‚æ•°</h2>

<p>è§£å†³åŠæ³•:
  useradd hadoop -g hadoop</p>

<h2 id="405-å¼‚å¸¸é—®é¢˜bash-homehadoopbashrc-æƒé™ä¸å¤Ÿ">40.5. å¼‚å¸¸é—®é¢˜ï¼šbash: /home/hadoop/.bashrc: æƒé™ä¸å¤Ÿ</h2>

<p>è§£å†³åŠæ³•ï¼š
  chown -R hadoop:hadoop /home/hadoop</p>

<p>listen_address è®¾ç½®æœ¬æœºIPå€¼
192.168.10.30
native_transport_address è®¾ç½®æœ¬æœºIPä»¥å¤–çš„å€¼192.168.10.80
[lifecycle_manager]</p>

<h2 id="406-å¹³å°æ£€æŸ¥ç¡®ä¿dseçš„å…¼å®¹æ€§å’Œæ”¯æŒåœ¨è‡ªå·±çš„é£é™©ä¸‹ç¦ç”¨é»˜è®¤å€¼-false">40.6. å¹³å°æ£€æŸ¥ç¡®ä¿DSEçš„å…¼å®¹æ€§å’Œæ”¯æŒã€‚åœ¨è‡ªå·±çš„é£é™©ä¸‹ç¦ç”¨ã€‚é»˜è®¤å€¼: False</h2>

<p>disable_platform_check = True</p>

<p>Lifecycle Managerç›®å‰ä¸æ”¯æŒç®¡ç†DSEå¤šå®ä¾‹èŠ‚ç‚¹</p>

<p>RetHad7  httpd å®‰è£…</p>

<h2 id="407-å°†ä¸‹é¢ä¸‹è½½å¥½çš„rpmåŒ…æ‹·è´åˆ°èŠ‚ç‚¹çš„tmphttpdä¸Š">40.7. å°†ä¸‹é¢ä¸‹è½½å¥½çš„rpmåŒ…æ‹·è´åˆ°èŠ‚ç‚¹çš„/tmp/httpdä¸Š</h2>

<p>apr-1.4.8-3.el7.x86_64
apr-util-1.5.2-6.el7.x86_64
httpd-tools-2.4.6-40.el7.x86_64
mailcap-2.1.41-2.el7.noarch 
httpd-2.4.6-40.el7.x86_64</p>

<h2 id="408-httpdå®‰è£…">40.8. httpdå®‰è£…</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /tmp/httpd
rpm <span class="nt">-ivh</span> httpd-2.4.6-40.el7.x86_64.rpm httpd-tools-2.4.6-40.el7.x86_64.rpm
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="409-åˆ›å»ºè‡ªå·±éœ€è¦çš„rmpæºåœ°å€å¹¶æˆæƒ">40.9. åˆ›å»ºè‡ªå·±éœ€è¦çš„rmpæºåœ°å€ï¼Œå¹¶æˆæƒ</h2>

<p>æ¯”å¦‚testï¼Œå¯ä»¥å¤šçº§ï¼Œå¦‚/test/erj
$ mkdir /var/http/html/test
$ chmod -R ugo+rx /var/http/html/test</p>

<p>$ mkdir /var/http/html/test/erj
$chmod -R ugo+rx /var/http/html/test/erj</p>

<h2 id="4010-å¯åŠ¨httpdæ³¨æ„å…³é—­é˜²ç«å¢™">40.10. å¯åŠ¨httpdï¼ˆæ³¨æ„å…³é—­é˜²ç«å¢™ï¼‰</h2>

<p>service httpd start</p>

<h2 id="4011-æ£€æŸ¥å¯åŠ¨çŠ¶æ€">40.11. æ£€æŸ¥å¯åŠ¨çŠ¶æ€</h2>

<p>service httpd status</p>

<h2 id="4012-webæµè§ˆå™¨è®¿é—®-å¦‚æœèƒ½è®¿é—®æˆåŠŸé‚£ä¹ˆhttpdå®‰è£…å°±å·²ç»æˆåŠŸäº†">40.12. Webæµè§ˆå™¨è®¿é—®, å¦‚æœèƒ½è®¿é—®æˆåŠŸé‚£ä¹ˆHTTPDå®‰è£…å°±å·²ç»æˆåŠŸäº†</h2>

<p>http://id/test</p>

<h2 id="4013-è®¾ç½®å¼€æœºå¯åŠ¨">40.13. è®¾ç½®å¼€æœºå¯åŠ¨</h2>

<p>el6:
chkconfig httpd on</p>

<p>el7:
systemctl enable httpd.service 
å¦‚æœæ­¤æ–¹å¼ä¸è¡Œ è¿›è¡Œä¸‹é¢å‘½ä»¤è®¾ç½®å¼€æœºå¯åŠ¨
chkconfig httpd on</p>

<h2 id="4014-æ£€æŸ¥å¼€æœºå¯åŠ¨">40.14. æ£€æŸ¥å¼€æœºå¯åŠ¨</h2>

<p>el7:
systemctl status httpd</p>

<h1 id="41-è‡ªå®šä¹‰å¼€æœºå¯åŠ¨æœåŠ¡">41. è‡ªå®šä¹‰å¼€æœºå¯åŠ¨æœåŠ¡</h1>

<p>vim /etc/init.d/dse</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">#</span>
<span class="c"># dse start/stop dse</span>
<span class="c">#</span>
<span class="c"># chkconfig: 2345 85 15</span>
<span class="c"># description: start dse/dse at boot time</span>

start<span class="o">(){</span>
        <span class="nb">echo</span> <span class="s2">"start dse"</span>
		su cassandra
        dse cassandra <span class="nt">-k</span> <span class="nt">-g</span> <span class="nt">-s</span>
		<span class="nb">exit </span>0<span class="p">;</span>
<span class="o">}</span>
stop<span class="o">(){</span>
        <span class="nb">echo</span> <span class="s2">"stop dse"</span>
		su cassandra
        dse cassandra <span class="nt">-k</span> <span class="nt">-g</span> <span class="nt">-s</span>
		<span class="nb">exit </span>0<span class="p">;</span>
<span class="o">}</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in
</span>start<span class="p">)</span>
        start
        <span class="p">;;</span>
stop<span class="p">)</span>
        stop
        <span class="p">;;</span>
<span class="k">*</span><span class="p">)</span>
        <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> {start|stop}"</span>
        <span class="nb">exit </span>1
        <span class="p">;;</span>
<span class="k">esac</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¼€æœºå¯åŠ¨</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>service shadowsocks start
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="42-shellç¼–ç¨‹">42. Shellç¼–ç¨‹</h1>

<h2 id="421-hello-world">42.1. Hello World</h2>

<p>æ‰“å°ä¿¡æ¯ï¼Œç›¸å½“äºSystem.out.println(â€œHello Worldâ€); ;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>#!/bin/bash
echo "Hello World !"
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="422-å˜é‡">42.2. å˜é‡</h2>

<h3 id="4221-å®šä¹‰å˜é‡">42.2.1. å®šä¹‰å˜é‡</h3>

<p>å®šä¹‰å˜é‡æ—¶ï¼Œå˜é‡åä¸åŠ ç¾å…ƒç¬¦å·ï¼ˆ$ï¼ŒPHPè¯­è¨€ä¸­å˜é‡éœ€è¦ï¼‰ï¼Œå¦‚ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">your_name</span><span class="o">=</span><span class="s2">"runoob.com"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ³¨æ„ï¼Œå˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè¿™å¯èƒ½å’Œä½ ç†Ÿæ‚‰çš„æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½ä¸ä¸€æ ·ã€‚åŒæ—¶ï¼Œå˜é‡åçš„å‘½åé¡»éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š</p>

<ul>
  <li>å‘½ååªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé¦–ä¸ªå­—ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚</li>
  <li>ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€‚</li>
  <li>ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ã€‚</li>
</ul>

<p>-ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—ï¼ˆå¯ç”¨helpå‘½ä»¤æŸ¥çœ‹ä¿ç•™å…³é”®å­—ï¼‰ã€‚</p>

<h3 id="4222-ä½¿ç”¨å˜é‡-é€šè¿‡--åŠ å˜é‡å-ä½¿ç”¨å˜é‡">42.2.2. ä½¿ç”¨å˜é‡, é€šè¿‡ $ åŠ å˜é‡å ä½¿ç”¨å˜é‡</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">your_name</span><span class="o">=</span><span class="s2">"qinjx"</span>
<span class="nb">echo</span> <span class="nv">$your_name</span>
<span class="nb">echo</span> <span class="k">${</span><span class="nv">your_name</span><span class="k">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>åŠ èŠ±æ‹¬å·æ˜¯ä¸ºäº†å¸®åŠ©è§£é‡Šå™¨è¯†åˆ«å˜é‡çš„è¾¹ç•Œï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§æƒ…å†µ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">for </span>skill <span class="k">in </span>Ada Coffe Action Java<span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"I am good at </span><span class="k">${</span><span class="nv">skill</span><span class="k">}</span><span class="s2">Script"</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ¨èç»™æ‰€æœ‰å˜é‡åŠ ä¸ŠèŠ±æ‹¬å·ï¼Œè¿™æ˜¯ä¸ªå¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚</p>

<p>å·²å®šä¹‰çš„å˜é‡ï¼Œå¯ä»¥è¢«é‡æ–°å®šä¹‰ï¼Œå¦‚ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">your_name</span><span class="o">=</span><span class="s2">"tom"</span>
<span class="nb">echo</span> <span class="nv">$your_name</span>
<span class="nv">your_name</span><span class="o">=</span><span class="s2">"alibaba"</span>
<span class="nb">echo</span> <span class="nv">$your_name</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ³¨æ„ï¼Œç¬¬äºŒæ¬¡èµ‹å€¼çš„æ—¶å€™ä¸èƒ½å†™$your_name=â€alibabaâ€ï¼Œä½¿ç”¨å˜é‡çš„æ—¶å€™æ‰åŠ ç¾å…ƒç¬¦ï¼ˆ$ï¼‰ã€‚</p>

<h3 id="4223-åªè¯»å˜é‡">42.2.3. åªè¯»å˜é‡</h3>

<p>ä½¿ç”¨ readonly å‘½ä»¤å¯ä»¥å°†å˜é‡å®šä¹‰ä¸ºåªè¯»å˜é‡ï¼Œåªè¯»å˜é‡çš„å€¼ä¸èƒ½è¢«æ”¹å˜ã€‚
ä¸‹é¢çš„ä¾‹å­å°è¯•æ›´æ”¹åªè¯»å˜é‡ï¼Œç»“æœæŠ¥é”™ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">myUrl</span><span class="o">=</span><span class="s2">"http://www.w3cschool.cc"</span>
<span class="nb">readonly </span>myUrl
<span class="nv">myUrl</span><span class="o">=</span><span class="s2">"http://www.runoob.com"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æŠ¥é”™ä¿¡æ¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>[root@dse02 1.0.0]# ./renamefile.sh 
./renamefile.sh: line 4: myUrl: readonly variable
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="4224-åˆ é™¤å˜é‡">42.2.4. åˆ é™¤å˜é‡</h3>

<p>ä½¿ç”¨ unset å‘½ä»¤å¯ä»¥åˆ é™¤å˜é‡ã€‚è¯­æ³•ï¼š
unset variable_name</p>

<p>å˜é‡è¢«åˆ é™¤åä¸èƒ½å†æ¬¡ä½¿ç”¨ã€‚unset å‘½ä»¤ä¸èƒ½åˆ é™¤åªè¯»å˜é‡ã€‚</p>

<p>å®ä¾‹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="nv">myUrl</span><span class="o">=</span><span class="s2">"http://www.runoob.com"</span>
<span class="nb">unset </span>myUrl
<span class="nb">echo</span> <span class="nv">$myUrl</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="4225-è·å–å˜é‡å­—ç¬¦ä¸²é•¿åº¦">42.2.5. è·å–å˜é‡å­—ç¬¦ä¸²é•¿åº¦</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="nv">string</span><span class="o">=</span><span class="s2">"abcd"</span>
<span class="nb">echo</span> <span class="k">${#</span><span class="nv">string</span><span class="k">}</span> <span class="c">#è¾“å‡º 4</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="4226-æå–å­å­—ç¬¦ä¸²">42.2.6. æå–å­å­—ç¬¦ä¸²</h3>

<p>ä»¥ä¸‹å®ä¾‹ä»å­—ç¬¦ä¸²ç¬¬ 2 ä¸ªå­—ç¬¦å¼€å§‹æˆªå– 4 ä¸ªå­—ç¬¦ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="nv">string</span><span class="o">=</span><span class="s2">"runoob is a great site"</span>
<span class="nb">echo</span> <span class="k">${</span><span class="nv">string</span>:1:4<span class="k">}</span> <span class="c"># è¾“å‡º unoo</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="423-shell-æ•°ç»„">42.3. Shell æ•°ç»„</h2>

<p>bashæ”¯æŒä¸€ç»´æ•°ç»„ï¼ˆä¸æ”¯æŒå¤šç»´æ•°ç»„ï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰é™å®šæ•°ç»„çš„å¤§å°ã€‚
ç±»ä¼¼ä¸Cè¯­è¨€ï¼Œæ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ç”±0å¼€å§‹ç¼–å·ã€‚è·å–æ•°ç»„ä¸­çš„å…ƒç´ è¦åˆ©ç”¨ä¸‹æ ‡ï¼Œä¸‹æ ‡å¯ä»¥æ˜¯æ•´æ•°æˆ–ç®—æœ¯è¡¨è¾¾å¼ï¼Œå…¶å€¼åº”å¤§äºæˆ–ç­‰äº0ã€‚</p>

<h3 id="4231-å®šä¹‰æ•°ç»„">42.3.1. å®šä¹‰æ•°ç»„</h3>

<p>åœ¨Shellä¸­ï¼Œç”¨æ‹¬å·æ¥è¡¨ç¤ºæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ç”¨â€ç©ºæ ¼â€ç¬¦å·åˆ†å‰²å¼€ã€‚å®šä¹‰æ•°ç»„çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š
æ•°ç»„å=(å€¼1 å€¼2 â€¦ å€¼n)</p>

<p>ä¾‹å¦‚ï¼š</p>

<p>array_name=(value0 value1 value2 value3)</p>

<p>æˆ–è€…
array_name=(
value0
value1
value2
value3
)</p>

<p>è¿˜å¯ä»¥å•ç‹¬å®šä¹‰æ•°ç»„çš„å„ä¸ªåˆ†é‡ï¼š
array_name[0]=value0
array_name[1]=value1
array_name[n]=valuen
å¯ä»¥ä¸ä½¿ç”¨è¿ç»­çš„ä¸‹æ ‡ï¼Œè€Œä¸”ä¸‹æ ‡çš„èŒƒå›´æ²¡æœ‰é™åˆ¶ã€‚</p>

<h3 id="4232-è¯»å–æ•°ç»„">42.3.2. è¯»å–æ•°ç»„</h3>

<p>è¯»å–æ•°ç»„å…ƒç´ å€¼çš„ä¸€èˆ¬æ ¼å¼æ˜¯ï¼š</p>

<p>${æ•°ç»„å[ä¸‹æ ‡]}</p>

<p>ä¾‹å¦‚ï¼š
valuen=${array_name[n]}</p>

<p>ä½¿ç”¨@ç¬¦å·å¯ä»¥è·å–æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä¾‹å¦‚ï¼š
echo ${array_name[@]}</p>

<h3 id="4233-è·å–æ•°ç»„çš„é•¿åº¦">42.3.3. è·å–æ•°ç»„çš„é•¿åº¦</h3>

<p>è·å–æ•°ç»„é•¿åº¦çš„æ–¹æ³•ä¸è·å–å­—ç¬¦ä¸²é•¿åº¦çš„æ–¹æ³•ç›¸åŒï¼Œä¾‹å¦‚ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c"># å–å¾—æ•°ç»„å…ƒç´ çš„ä¸ªæ•°</span>
<span class="nv">length</span><span class="o">=</span><span class="k">${#</span><span class="nv">array_name</span><span class="p">[@]</span><span class="k">}</span>
<span class="c"># æˆ–è€…</span>
<span class="nv">length</span><span class="o">=</span><span class="k">${#</span><span class="nv">array_name</span><span class="p">[*]</span><span class="k">}</span>
<span class="c"># å–å¾—æ•°ç»„å•ä¸ªå…ƒç´ çš„é•¿åº¦</span>
<span class="nv">lengthn</span><span class="o">=</span><span class="k">${#</span><span class="nv">array_name</span><span class="p">[n]</span><span class="k">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="424-shell-ä¼ é€’å‚æ•°">42.4. Shell ä¼ é€’å‚æ•°</h2>

<p>æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡Œ Shell è„šæœ¬æ—¶ï¼Œå‘è„šæœ¬ä¼ é€’å‚æ•°ï¼Œè„šæœ¬å†…è·å–å‚æ•°çš„æ ¼å¼ä¸ºï¼š$nã€‚n ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼Œ1 ä¸ºæ‰§è¡Œè„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ2 ä¸ºæ‰§è¡Œè„šæœ¬çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦</p>

<p>å®ä¾‹ï¼š
ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬å‘è„šæœ¬ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼Œå¹¶åˆ†åˆ«è¾“å‡ºï¼Œå…¶ä¸­ $0 ä¸ºæ‰§è¡Œçš„æ–‡ä»¶åï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>#!/bin/bash
# author:liulv
# url:

echo "Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼";
echo "æ‰§è¡Œçš„æ–‡ä»¶åï¼š$0";
echo "ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š$1";
echo "ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$2";
echo "ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š$3";
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¸ºè„šæœ¬è®¾ç½®å¯æ‰§è¡Œæƒé™ï¼Œå¹¶æ‰§è¡Œè„šæœ¬ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>$ chmod +x test.sh 
$ ./test.sh 1 2 3
Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼
æ‰§è¡Œçš„æ–‡ä»¶åï¼š./test.sh
ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š1
ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š2
ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š3
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦å¤–ï¼Œè¿˜æœ‰å‡ ä¸ªç‰¹æ®Šå­—ç¬¦ç”¨æ¥å¤„ç†å‚æ•°ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>| å‚æ•°å¤„ç†  |  è¯´æ˜ |
| ------------ | ------------ |
| $#  | ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•° |
| $*  | ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°ã€‚å¦‚"$*"ç”¨ã€Œ"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥"$1 $2 â€¦ $n"çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚  |
| $$  | è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå·  |
| $!  | åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„IDå·  |
| $@  | ä¸$*ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åŠ å¼•å·ï¼Œå¹¶åœ¨å¼•å·ä¸­è¿”å›æ¯ä¸ªå‚æ•°ã€‚å¦‚"$@"ç”¨ã€Œ"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥"$1" "$2" â€¦ "$n" çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚   |
| $-  | æ˜¾ç¤ºShellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸setå‘½ä»¤åŠŸèƒ½ç›¸åŒã€‚  |
| $?  | æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯ã€‚  |
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c"># author:liulv</span>
<span class="c"># url:</span>

<span class="nb">echo</span> <span class="s2">"Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼"</span><span class="p">;</span>
<span class="nb">echo</span> <span class="s2">"ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š</span><span class="nv">$1</span><span class="s2">"</span><span class="p">;</span>

<span class="nb">echo</span> <span class="s2">"å‚æ•°ä¸ªæ•°ä¸ºï¼š$#"</span><span class="p">;</span>
<span class="nb">echo</span> <span class="s2">"ä¼ é€’çš„å‚æ•°ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²æ˜¾ç¤ºï¼š</span><span class="nv">$*</span><span class="s2">"</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>$* ä¸ $@ åŒºåˆ«ï¼š</p>

<p>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯å¼•ç”¨æ‰€æœ‰å‚æ•°ã€‚
  ä¸åŒç‚¹ï¼šåªæœ‰åœ¨åŒå¼•å·ä¸­ä½“ç°å‡ºæ¥ã€‚å‡è®¾åœ¨è„šæœ¬è¿è¡Œæ—¶å†™äº†ä¸‰ä¸ªå‚æ•° 1ã€2ã€3ï¼Œï¼Œåˆ™ â€œ * â€œ ç­‰ä»·äº â€œ1 2 3â€ï¼ˆä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼‰ï¼Œè€Œ â€œ@â€ ç­‰ä»·äº â€œ1â€ â€œ2â€ â€œ3â€ï¼ˆä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼‰ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c"># author:liulv</span>
<span class="c"># url:</span>

<span class="nb">echo</span> <span class="s2">"-- </span><span class="se">\$</span><span class="s2">* æ¼”ç¤º ---"</span>
<span class="k">for </span>i <span class="k">in</span> <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="nv">$i</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"-- </span><span class="se">\$</span><span class="s2">@ æ¼”ç¤º ---"</span>
<span class="k">for </span>i <span class="k">in</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="nv">$i</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="425-shellè¿ç®—ç¬¦">42.5. Shellè¿ç®—ç¬¦</h2>

<p>åŸç”Ÿbashä¸æ”¯æŒç®€å•çš„æ•°å­¦è¿ç®—ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å…¶ä»–å‘½ä»¤æ¥å®ç°ï¼Œä¾‹å¦‚ awk å’Œ exprï¼Œexpr æœ€å¸¸ç”¨ã€‚
expr æ˜¯ä¸€æ¬¾è¡¨è¾¾å¼è®¡ç®—å·¥å…·ï¼Œä½¿ç”¨å®ƒèƒ½å®Œæˆè¡¨è¾¾å¼çš„æ±‚å€¼æ“ä½œã€‚</p>

<p>ä¾‹å¦‚ï¼Œä¸¤ä¸ªæ•°ç›¸åŠ (æ³¨æ„ä½¿ç”¨çš„æ˜¯åå¼•å· ` è€Œä¸æ˜¯å•å¼•å· â€˜)ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">val</span><span class="o">=</span> <span class="sb">`</span><span class="nb">expr </span>2 + 2<span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">"ä¸¤æ•°ä¹‹å’Œä¸º : </span><span class="nv">$val</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ‰§è¡Œè„šæœ¬ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ä¸¤æ•°ä¹‹å’Œä¸º : 4
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¸¤ç‚¹æ³¨æ„ï¼š</p>

<ul>
  <li>è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦ä¹‹é—´è¦æœ‰ç©ºæ ¼ï¼Œä¾‹å¦‚ 2+2 æ˜¯ä¸å¯¹çš„ï¼Œå¿…é¡»å†™æˆ 2 + 2ï¼Œè¿™ä¸æˆ‘ä»¬ç†Ÿæ‚‰çš„å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸ä¸€æ ·ã€‚</li>
  <li>å®Œæ•´çš„è¡¨è¾¾å¼è¦è¢« ` ` åŒ…å«ï¼Œæ³¨æ„è¿™ä¸ªå­—ç¬¦ä¸æ˜¯å¸¸ç”¨çš„å•å¼•å·ï¼Œåœ¨ Esc é”®ä¸‹è¾¹ã€‚</li>
</ul>

<h3 id="4251-å…³ç³»è¿ç®—ç¬¦">42.5.1. å…³ç³»è¿ç®—ç¬¦</h3>

<p>ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„ç®—æœ¯è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20ï¼š
è¿ç®—ç¬¦   è¯´æ˜  ä¸¾ä¾‹</p>

<ul>
  <li>åŠ æ³• <code class="language-plaintext highlighter-rouge">expr $a + $b</code> ç»“æœä¸º 30ã€‚</li>
  <li>å‡æ³• <code class="language-plaintext highlighter-rouge">expr $a - $b</code> ç»“æœä¸º -10ã€‚</li>
  <li>ä¹˜æ³• <code class="language-plaintext highlighter-rouge">expr $a \* $b</code> ç»“æœä¸º  200ã€‚</li>
</ul>

<p>/   é™¤æ³• <code class="language-plaintext highlighter-rouge">expr $b / $a</code> ç»“æœä¸º 2ã€‚
%   å–ä½™ <code class="language-plaintext highlighter-rouge">expr $b % $a</code> ç»“æœä¸º 0ã€‚
=   èµ‹å€¼  a=$b å°†æŠŠå˜é‡ b çš„å€¼èµ‹ç»™ aã€‚
==  ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œç›¸åŒåˆ™è¿”å› trueã€‚   [ $a == $b ] è¿”å› falseã€‚
!=  ä¸ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œä¸ç›¸åŒåˆ™è¿”å› trueã€‚   [ $a != $b ] è¿”å› trueã€‚</p>

<p>æ³¨æ„ï¼šæ¡ä»¶è¡¨è¾¾å¼è¦æ”¾åœ¨æ–¹æ‹¬å·ä¹‹é—´ï¼Œå¹¶ä¸”è¦æœ‰ç©ºæ ¼ï¼Œä¾‹å¦‚: [$a==$b] æ˜¯é”™è¯¯çš„ï¼Œå¿…é¡»å†™æˆ [ $a == $b ]ã€‚</p>

<p>å®ä¾‹</p>

<p>ç®—æœ¯è¿ç®—ç¬¦å®ä¾‹å¦‚ä¸‹:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">a</span><span class="o">=</span>10
<span class="nv">b</span><span class="o">=</span>20

<span class="nv">val</span><span class="o">=</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$a</span> + <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">"a + b : </span><span class="nv">$val</span><span class="s2">"</span>

<span class="nv">val</span><span class="o">=</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$a</span> - <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">"a - b : </span><span class="nv">$val</span><span class="s2">"</span>

<span class="nv">val</span><span class="o">=</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">"a * b : </span><span class="nv">$val</span><span class="s2">"</span>

<span class="nv">val</span><span class="o">=</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$b</span> / <span class="nv">$a</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">"b / a : </span><span class="nv">$val</span><span class="s2">"</span>

<span class="nv">val</span><span class="o">=</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$b</span> % <span class="nv">$a</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">"b % a : </span><span class="nv">$val</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"a ç­‰äº b"</span>
<span class="k">fi
if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">!=</span> <span class="nv">$b</span> <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"a ä¸ç­‰äº b"</span>
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="4252-å¸ƒå°”è¿ç®—ç¬¦">42.5.2. å¸ƒå°”è¿ç®—ç¬¦</h3>

<p>ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„å¸ƒå°”è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20ï¼š</p>

<p>è¿ç®—ç¬¦   è¯´æ˜  ä¸¾ä¾‹
!   éè¿ç®—ï¼Œè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å› trueã€‚  [ ! false ] è¿”å› trueã€‚
-o  æˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› trueã€‚  [ $a -lt 20 -o $b -gt 100 ] è¿”å› trueã€‚
-a  ä¸è¿ç®—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸º true æ‰è¿”å› trueã€‚  [ $a -lt 20 -a $b -gt 100 ] è¿”å› falseã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="nv">a</span><span class="o">=</span>10
<span class="nv">b</span><span class="o">=</span>20

<span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">!=</span> <span class="nv">$b</span> <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> != </span><span class="nv">$b</span><span class="s2"> : a ä¸ç­‰äº b"</span>
<span class="k">else
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> != </span><span class="nv">$b</span><span class="s2">: a ç­‰äº b"</span>
<span class="k">fi
if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="nt">-lt</span> 100 <span class="nt">-a</span> <span class="nv">$b</span> <span class="nt">-gt</span> 15 <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> å°äº 100 ä¸” </span><span class="nv">$b</span><span class="s2"> å¤§äº 15 : è¿”å› true"</span>
<span class="k">else
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> å°äº 100 ä¸” </span><span class="nv">$b</span><span class="s2"> å¤§äº 15 : è¿”å› false"</span>
<span class="k">fi
if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="nt">-lt</span> 100 <span class="nt">-o</span> <span class="nv">$b</span> <span class="nt">-gt</span> 100 <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> å°äº 100 æˆ– </span><span class="nv">$b</span><span class="s2"> å¤§äº 100 : è¿”å› true"</span>
<span class="k">else
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> å°äº 100 æˆ– </span><span class="nv">$b</span><span class="s2"> å¤§äº 100 : è¿”å› false"</span>
<span class="k">fi
if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="nt">-lt</span> 5 <span class="nt">-o</span> <span class="nv">$b</span> <span class="nt">-gt</span> 100 <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> å°äº 5 æˆ– </span><span class="nv">$b</span><span class="s2"> å¤§äº 100 : è¿”å› true"</span>
<span class="k">else
   </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$a</span><span class="s2"> å°äº 5 æˆ– </span><span class="nv">$b</span><span class="s2"> å¤§äº 100 : è¿”å› false"</span>
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="4253-é€»è¾‘è¿ç®—ç¬¦">42.5.3. é€»è¾‘è¿ç®—ç¬¦</h3>

<p>ä»¥ä¸‹ä»‹ç» Shell çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20:
è¿ç®—ç¬¦   è¯´æ˜  ä¸¾ä¾‹
&amp;&amp;  é€»è¾‘çš„ AND   [[ $a -lt 100 &amp;&amp; $b -gt 100 ]] è¿”å› false
||  é€»è¾‘çš„ OR  [[ $a -lt 100 || $b -gt 100 ]] è¿”å› true</p>

<h3 id="4254-å­—ç¬¦ä¸²è¿ç®—ç¬¦">42.5.4. å­—ç¬¦ä¸²è¿ç®—ç¬¦</h3>

<p>ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„å­—ç¬¦ä¸²è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º â€œabcâ€ï¼Œå˜é‡ b ä¸º â€œefgâ€ï¼š
è¿ç®—ç¬¦   è¯´æ˜  ä¸¾ä¾‹
=   æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚  [ $a = $b ] è¿”å› falseã€‚
!=  æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚   [ $a != $b ] è¿”å› trueã€‚
-z  æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸º0è¿”å› trueã€‚  [ -z $a ] è¿”å› falseã€‚
-n  æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸ä¸º0è¿”å› trueã€‚   [ -n â€œ$aâ€ ] è¿”å› trueã€‚
str   æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚   [ $a ] è¿”å› trueã€‚</p>

<h3 id="4255-æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦">42.5.5. æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦</h3>

<p>æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ç”¨äºæ£€æµ‹ Unix æ–‡ä»¶çš„å„ç§å±æ€§ã€‚</p>

<p>å±æ€§æ£€æµ‹æè¿°å¦‚ä¸‹ï¼š
æ“ä½œç¬¦   è¯´æ˜  ä¸¾ä¾‹
-b file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å—è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -b $file ] è¿”å› falseã€‚
-c file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚   [ -c $file ] è¿”å› falseã€‚
-d file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯ç›®å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚   [ -d $file ] è¿”å› falseã€‚
-f file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶ï¼ˆæ—¢ä¸æ˜¯ç›®å½•ï¼Œä¹Ÿä¸æ˜¯è®¾å¤‡æ–‡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -f $file ] è¿”å› trueã€‚
-g file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SGID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -g $file ] è¿”å› falseã€‚
-k file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº†ç²˜ç€ä½(Sticky Bit)ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -k $file ] è¿”å› falseã€‚
-p file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æœ‰åç®¡é“ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚   [ -p $file ] è¿”å› falseã€‚
-u file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SUID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -u $file ] è¿”å› falseã€‚
-r file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯è¯»ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -r $file ] è¿”å› trueã€‚
-w file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯å†™ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -w $file ] è¿”å› trueã€‚
-x file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚   [ -x $file ] è¿”å› trueã€‚
-s file   æ£€æµ‹æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼ˆæ–‡ä»¶å¤§å°æ˜¯å¦å¤§äº0ï¼‰ï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚   [ -s $file ] è¿”å› trueã€‚
-e file   æ£€æµ‹æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚  [ -e $file ] è¿”å› trueã€‚</p>

<h2 id="426-linuxå‹ç¼©zipå’Œè§£å‹zip">42.6. Linuxå‹ç¼©Zipå’Œè§£å‹Zip</h2>

<p><strong>å‹ç¼©æœåŠ¡å™¨ä¸Šå½“å‰ç›®å½•çš„å†…å®¹ä¸ºxxx.zipæ–‡ä»¶</strong></p>

<p>zip -r xxx.zip ./*</p>

<p>å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å…¨éƒ¨å‹ç¼©æˆmyfile.zipæ–‡ä»¶, ï¼rè¡¨ç¤ºé€’å½’å‹ç¼©å­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶.</p>

<p><strong>å…¶ä»–</strong></p>

<p>zip -d myfile.zip smart.txt
åˆ é™¤å‹ç¼©æ–‡ä»¶ä¸­smart.txtæ–‡ä»¶
zip -m myfile.zip ./rpm_info.txt
å‘å‹ç¼©æ–‡ä»¶ä¸­myfile.zipä¸­æ·»åŠ rpm_info.txtæ–‡ä»¶</p>

<p><strong>è§£å‹zipæ–‡ä»¶åˆ°å½“å‰ç›®å½•</strong></p>

<p>unzip filename.zip</p>

<ul>
  <li>unzip
unzip -o -d /home/sunny myfile.zip
æŠŠmyfile.zipæ–‡ä»¶è§£å‹åˆ° /home/sunny/
-o: ä¸æç¤ºçš„æƒ…å†µä¸‹è¦†ç›–æ–‡ä»¶ï¼›
-d:-d /home/sunny æŒ‡æ˜å°†æ–‡ä»¶è§£å‹ç¼©åˆ°/home/sunnyç›®å½•ä¸‹ï¼›</li>
</ul>

<p><strong>æœ‰äº›æœåŠ¡å™¨æ²¡æœ‰å®‰è£…zipåŒ…æ‰§è¡Œä¸äº†zipå’Œunzipå‘½ä»¤ï¼Œå¯ä½¿ç”¨yumå®‰è£…</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nf">yum</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">grep</span><span class="w"> </span><span class="nx">zip/unzip</span><span class="w"> 
</span><span class="nf">yum</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">zip</span><span class="w">
</span><span class="nf">yum</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">unzip</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="427-linuxå‹ç¼©å’Œè§£å‹ç¼©å‘½ä»¤">42.7. linuxå‹ç¼©å’Œè§£å‹ç¼©å‘½ä»¤</h2>

<p>tar
  è§£åŒ…ï¼štar zxvf filename.tar
  æ‰“åŒ…ï¼štar -czvf rpm.tar rpm
zipå‘½ä»¤
  è§£å‹ï¼šunzip filename.zip
  å‹ç¼©ï¼šzip filename.zip dirname
gzå‘½ä»¤
  è§£å‹1ï¼šgunzip filename.gz
  è§£å‹2ï¼šgzip -d filename.gz
  å‹ç¼©ï¼šgzip filename
   .tar.gz å’Œ  .tgz
   è§£å‹ï¼štar zxvf filename.tar.gz
   å‹ç¼©ï¼štar zcvf filename.tar.gz dirname
   å‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼štar zcvf filename.tar.gz dirname1 dirname2 dirname3â€¦..
bz2å‘½ä»¤
  è§£å‹1ï¼šbzip2 -d filename.bz2
  è§£å‹2ï¼šbunzip2 filename.bz2
  å‹ç¼©ï¼šbzip2 -z filename.tar.bz2
  è§£å‹ï¼štar jxvf filename.tar.bz2
  å‹ç¼©ï¼štar jcvf filename.tar.bz2 dirname
bzå‘½ä»¤
   è§£å‹1ï¼šbzip2 -d filename.bz
   è§£å‹2ï¼šbunzip2 filename.bz
      .tar.bz
      è§£å‹ï¼štar jxvf filename.tar.bz</p>

<p>zå‘½ä»¤
   è§£å‹ï¼šuncompress filename.z
   å‹ç¼©ï¼šcompress filename
      .tar.z
         è§£å‹ï¼štar zxvf filename.tar.z
         å‹ç¼©ï¼štar zcvf filename.tar.z dirname</p>
:ET