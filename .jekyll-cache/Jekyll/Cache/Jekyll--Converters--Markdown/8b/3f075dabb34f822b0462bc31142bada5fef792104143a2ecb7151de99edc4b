I"È/<h1 id="1-æœ¬åœ°ç¯å¢ƒ">1. æœ¬åœ°ç¯å¢ƒ</h1>

<h2 id="11-å‰æ">1.1. å‰æ</h2>

<p>å®‰è£…å‰ææœ‰</p>

<ul>
  <li>å·²å®‰è£…äº†Hadoopé›†ç¾¤</li>
  <li>å·²å®‰è£…Kafkaç¯å¢ƒ</li>
  <li>å·²å®‰è£…Sparkç¯å¢ƒ</li>
  <li>å·²å®‰è£…Hiveç¯å¢ƒ</li>
</ul>

<p>æš‚æ—¶ç”¨åˆ°çš„ä¸»è¦æ˜¯Kafkaã€Hadoopã€Spark</p>

<p>æœ¬åœ°ä¼ªåˆ†å¸ƒæ¨¡å¼å•æœºæ¨¡å¼</p>

<h2 id="12-å¯åŠ¨åœå‘½ä»¤">1.2. å¯åŠ¨åœå‘½ä»¤</h2>

<h3 id="121-zookeeper">1.2.1. Zookeeper</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$ZOOKEEPER_HOME</span><span class="nx">/bin/zkServer.sh</span><span class="w"> </span><span class="nx">start</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$ZOOKEEPER_HOME</span><span class="nx">/bin/zkServer.sh</span><span class="w"> </span><span class="nx">stop</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="122-kafka">1.2.2. Kafka</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-server-start.sh</span><span class="w"> </span><span class="nt">-daemon</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/config/server.properties</span><span class="w">

</span><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-server-stop.sh</span><span class="w"> </span><span class="nt">-daemon</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/config/server.properties</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="123-hadoop">1.2.3. Hadoop</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">start-all.sh</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">stop-all.sh</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="124-spark">1.2.4. Spark</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">start-history-server.sh</span><span class="w"> 
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="13-å‘½ä»¤å’Œå‰ç«¯">1.3. å‘½ä»¤å’Œå‰ç«¯</h2>

<h3 id="zookeeper">Zookeeper</h3>

<p>zkCliè¿æ¥</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$ZOOKEEPER_HOME</span><span class="nx">/bin/zkCli.sh</span><span class="w"> </span><span class="nt">-server</span><span class="w"> </span><span class="nx">hadoop01:2181</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="hadoop">Hadoop</h3>

<p>HDFS</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">hadoop01:50070</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>YARN</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">hadoop01:8080</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>MR Job history</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">hadoop01:19888</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="kafkaå‘½ä»¤">Kafkaå‘½ä»¤</h3>

<p><strong>åˆ›å»ºtopic</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-topics.sh</span><span class="w"> </span><span class="nt">--create</span><span class="w"> </span><span class="nt">--zookeeper</span><span class="w"> </span><span class="nx">localhost:2181/kafka</span><span class="w"> </span><span class="nt">--replication-factor</span><span class="w"> </span><span class="nx">1</span><span class="w"> </span><span class="nt">--partitions</span><span class="w"> </span><span class="nx">2</span><span class="w"> </span><span class="nt">--topic</span><span class="w"> </span><span class="nx">topic01</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æŸ¥çœ‹æŸ¥çœ‹Topiccåˆ—è¡¨</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-topics.sh</span><span class="w"> </span><span class="nt">--zookeeper</span><span class="w"> </span><span class="nx">localhost:2181/kafka</span><span class="w"> </span><span class="nt">--list</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æŸ¥çœ‹Topic - topic01è¯¦æƒ…</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-topics.sh</span><span class="w"> </span><span class="nt">--describe</span><span class="w"> </span><span class="nt">--zookeeper</span><span class="w"> </span><span class="nx">localhost:2181/kafka</span><span class="w"> </span><span class="nt">--topic</span><span class="w"> </span><span class="nx">topic01</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>ç”Ÿæˆè€…Producer</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-console-producer.sh</span><span class="w"> </span><span class="nt">--broker-list</span><span class="w"> </span><span class="nx">localhost:9092</span><span class="w"> </span><span class="nt">--topic</span><span class="w"> </span><span class="nx">topic01</span><span class="w"> </span><span class="nt">--producer</span><span class="o">.</span><span class="nf">config</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/config/producer.properties</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æ¶ˆè´¹è€…Consumer</strong>
é€šè¿‡brokerç®¡ç†offset</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-console-consumer.sh</span><span class="w"> </span><span class="nt">--zookeeper</span><span class="w"> </span><span class="nx">127.0.0.1:2181/kafka</span><span class="w"> </span><span class="nt">--topic</span><span class="w"> </span><span class="nx">topic01</span><span class="w"> </span><span class="nt">--group</span><span class="w"> </span><span class="nx">group01</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>é€šè¿‡zookeeperç®¡ç†offset</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-console-consumer.sh</span><span class="w"> </span><span class="nt">--zookeeper</span><span class="w"> </span><span class="nx">127.0.0.1:2181/kafka</span><span class="w"> </span><span class="nt">--topic</span><span class="w"> </span><span class="nx">topic01</span><span class="w"> </span><span class="nt">--group</span><span class="w"> </span><span class="nx">topic01_g01</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">sh</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/bin/kafka-console-consumer.sh</span><span class="w"> </span><span class="nt">--bootstrap-server</span><span class="w"> </span><span class="nx">localhost:9092</span><span class="w"> </span><span class="nt">--topic</span><span class="w"> </span><span class="nx">topic01</span><span class="w"> </span><span class="nt">--from-beginning</span><span class="w">  </span><span class="nt">--delete-consumer-offsets</span><span class="w"> </span><span class="nt">--consumer</span><span class="o">.</span><span class="nf">config</span><span class="w"> </span><span class="nv">$KAFKA_HOME</span><span class="nx">/config/consumer.properties</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æ¶ˆè´¹è€…ç»„groups</strong></p>

<p>æŸ¥è¯¢brokerçš„grougsæ¶ˆè´¹æƒ…å†µ</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>sh $KAFKA_HOME/bin/kafka-consumer-groups.sh â€“bootstrap-server localhost:9092 â€“new-consumer â€“describe â€“group test01</p>

<p>groups by zookeeper</p>

<p>sh $KAFKA_HOME/bin/kafka-consumer-groups.sh â€“zookeeper localhost:2181 â€“describe â€“group read_kafka_c2
â€“groups broker</p>

:ET